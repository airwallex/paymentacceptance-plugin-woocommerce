/* Airwallex Checkout Component Version [0.2.45] */
var Airwallex=function(e){"use strict";const t=(e,t)=>{const n=document.createElement("form");n.setAttribute("method","post"),n.setAttribute("style","height: 0; overflow: hidden;"),n.action=t,Object.keys(e||{}).forEach((t=>{const i=document.createElement("input");i.type="hidden",i.name=t,i.value=e[t],n.appendChild(i)}));const i=document.createElement("input");i.type="submit",n.appendChild(i),document.body.appendChild(n),i.click()},n={prod:"checkout.airwallex.com",demo:"checkout-demo.airwallex.com",staging:"checkout-staging.airwallex.com",qa:"checkoutui.qa.awx.im",preview:"checkoutui.preview.awx.im",dev:"localhost:3000"},i={prod:"https://pci-api.airwallex.com",demo:"https://pci-api-demo.airwallex.com",staging:"https://pci-api-staging.airwallex.com",qa:"https://pci-api-qa.airwallex.com",preview:"https://pci-api-preview.airwallex.com",dev:"http://localhost:8080"};class o{constructor(e,t){var n,i;this.domElement=null,this.gatewayUrl=e,this.options=t,this.iframe=window.document.createElement("iframe"),this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("allowtransparency","true"),this.iframe.setAttribute("importance","high"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("allowpaymentrequest","true"),null===(n=this.iframe)||void 0===n||n.setAttribute("style","\n        height: 0;\n        width: 100%;\n        display: block;\n      "),i=e=>{var t,n,i;if(e.origin===this.gatewayUrl&&e.isTrusted&&"onReady"===(null===(t=e.data)||void 0===t?void 0:t.code)){const t=new CustomEvent(null===(n=e.data)||void 0===n?void 0:n.code,{detail:{type:null===(i=e.data)||void 0===i?void 0:i.type},bubbles:!0,composed:!0});window.document.dispatchEvent(t)}},window.addEventListener("message",(e=>{window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify(e.data)),i(e)}))}addResizeListener(e){window.addEventListener("message",(t=>{var n,i,o,l;if(t.origin===this.gatewayUrl&&t.isTrusted&&"onResize"===(null===(n=t.data)||void 0===n?void 0:n.code)&&e===(null===(i=t.data)||void 0===i?void 0:i.type)){const e=null===(o=this.iframe)||void 0===o?void 0:o.style;e&&(e.height=`${null===(l=t.data)||void 0===l?void 0:l.height}px`)}}))}mount(e){if("string"!=typeof e)return(null==e?void 0:e.hasChildNodes())&&(e.innerHTML=""),this.iframe&&e.appendChild(this.iframe),this.domElement=e,e;{const t=window.document.getElementById(e);return(null==t?void 0:t.hasChildNodes())&&(t.innerHTML=""),this.iframe&&(null==t||t.appendChild(this.iframe)),t&&(this.domElement=t),t}}blur(){var e,t;null===(t=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({code:"blur"},this.gatewayUrl)}clear(){var e,t;null===(t=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({code:"clear"},this.gatewayUrl)}destroy(){var e;this.clear(),null===(e=this.iframe)||void 0===e||e.remove(),this.iframe=null}focus(){var e,t;null===(t=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({code:"focus"},this.gatewayUrl)}unmount(){var e;this.clear(),this.iframe&&(null===(e=this.domElement)||void 0===e||e.removeChild(this.iframe))}update(e){var t,n;this.options={...this.options,...e},null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"update",options:e},this.gatewayUrl)}async confirm(){throw new Error("Confirm is not supported in ElementBase")}success(e){throw new Error(`Call success with ${e.id} is not supported in ElementBase`)}fail(e){throw new Error(`Call fail with ${e.code}: ${e.message} is not supported in ElementBase`)}}class l extends o{constructor(e,t,n){var i,o,l,d;super(e,n),this.confirmResponse=t,null===(i=this.iframe)||void 0===i||i.setAttribute("src",`${e}/#/elements/3ds-frictionless?options=${encodeURIComponent(JSON.stringify(this.options))}&lang=${null===(o=ie.options)||void 0===o?void 0:o.locale}`),null===(l=this.iframe)||void 0===l||l.setAttribute("name","Airwallex 3DS frictionless iframe"),null===(d=this.iframe)||void 0===d||d.setAttribute("title","Airwallex 3DS frictionless iframe"),window.addEventListener("message",(e=>{var t,n,i,o;e.origin===this.gatewayUrl&&e.isTrusted&&"onReady"===(null===(t=e.data)||void 0===t?void 0:t.code)&&"threeDsFrictionless"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(null===(o=null===(i=this.iframe)||void 0===i?void 0:i.contentWindow)||void 0===o||o.postMessage({code:"update",data:this.confirmResponse},this.gatewayUrl))}))}async confirm(){var e,t;return null===(t=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({code:"confirm",data:this.confirmResponse},this.gatewayUrl),null}}class d extends o{constructor(e,t,n){var i,o,l,d,a,s,r,c,u;super(e,n),this.confirmResponse=t;const v=(null==n?void 0:n.customizeChallengeWindowSize)&&x[null==n?void 0:n.customizeChallengeWindowSize]?x[null==n?void 0:n.customizeChallengeWindowSize]:x["05"],m=(null===(i=null==n?void 0:n.style)||void 0===i?void 0:i.popupWidth)?`${null===(o=null==n?void 0:n.style)||void 0===o?void 0:o.popupWidth}px`:v[0],p=(null===(l=null==n?void 0:n.style)||void 0===l?void 0:l.popupHeight)?`${null===(d=null==n?void 0:n.style)||void 0===d?void 0:d.popupHeight}px`:v[1];null===(a=this.iframe)||void 0===a||a.setAttribute("src",`${e}/#/elements/3ds-challenge?options=${encodeURIComponent(JSON.stringify(this.options))}`),null===(s=this.iframe)||void 0===s||s.setAttribute("name","Airwallex 3DS challenge iframe"),null===(r=this.iframe)||void 0===r||r.setAttribute("title","Airwallex 3DS challenge iframe"),null===(c=this.iframe)||void 0===c||c.setAttribute("scrolling","yes"),null===(u=this.iframe)||void 0===u||u.setAttribute("style",`\n        background: #fff;\n        width: ${m};\n        height: ${p};\n        position: ${(null==n?void 0:n.useDefaultStyle)?"absolute":"relative"};\n        top: ${(null==n?void 0:n.useDefaultStyle)?"50%":"0"};\n        left: ${(null==n?void 0:n.useDefaultStyle)?"50%":"0"};\n        transform: ${(null==n?void 0:n.useDefaultStyle)?"translate(-50%, -50%)":"none"};\n        border-radius: ${(null==n?void 0:n.useDefaultStyle)?"4px":"0"};\n      `),window.addEventListener("message",(e=>{var t,n,i,o;e.origin===this.gatewayUrl&&e.isTrusted&&"onReady"===(null===(t=e.data)||void 0===t?void 0:t.code)&&"threeDsChallenge"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(null===(o=null===(i=this.iframe)||void 0===i?void 0:i.contentWindow)||void 0===o||o.postMessage({code:"update",data:this.confirmResponse},this.gatewayUrl))}))}async confirm(){var e,t;return null===(t=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({code:"confirm",data:this.confirmResponse},this.gatewayUrl),null}}const a="threeDsFrictionless",s="threeDsChallenge";let r,c,u,v,m,p,h,w;const f={resolver:null,reject:null,awaiting:!1},g=e=>{var t;null===(t=document.querySelector(`#${e}`))||void 0===t||t.remove(),le(e===a?a:s)},y=()=>{f.awaiting=!1,f.resolver=null,f.reject=null},b=e=>{var t;g(a),c?r=c:(r=document.createElement("div"),r.setAttribute("id",s),r.setAttribute("style","\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 0;\n        z-index: 1500;\n        overflow: hidden;\n        background: rgba(0, 0, 0, 0.75);\n      "),document.body.appendChild(r)),ae(s,new d(h,e,{origin:window.location.origin,style:{popupWidth:v,popupHeight:m},useDefaultStyle:null===c,customizeChallengeWindowSize:p,intent:w})),window.addEventListener("message",$),null===(t=de(s))||void 0===t||t.mount(r)},E=({intent:e,gatewayUrl:t,cardBin:n,next_action:i,authFormContainer:o,componentType:d,challengeWindowSize:r})=>{var v;if(f.awaiting&&console.warn("Should wait previous 3ds flow finished before execute new one!"),console.log("threeDsHandler onChallenge type",(new Date).toLocaleTimeString()),c=document.getElementById(o||""),u=d,p=r,h=t,w=e,g(a),g(s),"WAITING_USER_INFO_INPUT"===(null==i?void 0:i.stage))b({type:"threeDsFrictionless",next_action:i});else{ae(a,new l(h,{code:"",type:a,cardBin:n,next_action:i},{intent:w,origin:window.location.origin}));const e=document.createElement("div");e.setAttribute("id",a),document.body.appendChild(e),window.addEventListener("message",C),null===(v=de(a))||void 0===v||v.mount(e)}return new Promise(((e,t)=>{f.resolver=e,f.reject=t,f.awaiting=!0}))},C=e=>{var t,n;const i="data"in e?e.data:e.detail,o=["hpp","api"].includes(u),l=o?null:de(u),d=(null==l?void 0:l.gatewayUrl)||window.location.origin;("data"in e&&e.origin===d&&e.isTrusted||o)&&(null==i?void 0:i.type)===a&&(g(s),"onSuccess"===(null==i?void 0:i.code)&&(console.log("frictionlessHandler onSuccess",(new Date).toLocaleTimeString()),null===(t=f.resolver)||void 0===t||t.call(f,i),y(),g(a)),["onError","onChallengeError"].includes(null==i?void 0:i.code)&&(console.log(`frictionlessHandler ${null==i?void 0:i.code}`,(new Date).toLocaleTimeString()),null===(n=f.reject)||void 0===n||n.call(f,i),y(),g(a)),"onChallenge"===(null==i?void 0:i.code)&&(console.log("frictionlessHandler onChallenge threeDsFrictionlessType",(new Date).toLocaleTimeString()),b(i)))},$=e=>{var t,n;const i="data"in e?e.data:e.detail,o=["hpp","api"].includes(u),l=o?null:de(u),d=(null==l?void 0:l.gatewayUrl)||window.location.origin;("data"in e&&e.origin===d&&e.isTrusted||o)&&(null==i?void 0:i.type)===s&&("onReady"===(null==i?void 0:i.code)&&(console.log("challengeHandler onReady",(new Date).toLocaleTimeString()),setTimeout((()=>{r.style.height="100%"}),2e3)),"onChallengeSuccess"===(null==i?void 0:i.code)&&(r.style.height="0"),"onSuccess"===(null==i?void 0:i.code)&&(console.log("challengeHandler onSuccess",(new Date).toLocaleTimeString()),null===(t=f.resolver)||void 0===t||t.call(f,i),y(),g(s)),["onError","onChallengeError"].includes(null==i?void 0:i.code)&&(console.log(`challengeHandler ${null==i?void 0:i.code}`,(new Date).toLocaleTimeString()),null===(n=f.reject)||void 0===n||n.call(f,i),y(),g(s)))},I=({type:e,popupWidth:t,popupHeight:n,authFormContainer:i})=>{v=t,m=n;const o=async t=>{var n,l,d,a;const s="data"in t?t.data:t.detail,r="hpp"===e,c=r?null:de(e),u=(null==c?void 0:c.gatewayUrl)||window.location.origin;if(("data"in t&&t.origin===u&&t.isTrusted||r)&&(null==s?void 0:s.type)===e&&"onChallenge"===(null==s?void 0:s.code)){const{cardBin:t,next_action:r,intent:v}=s;try{const d=await E({gatewayUrl:u,cardBin:t,intent:v,next_action:r,authFormContainer:i,componentType:e});"hpp"===e?(e=>{const t=new CustomEvent("on3dsSuccess",{detail:e,bubbles:!0,composed:!0});window.document.dispatchEvent(t)})(d):((null==d?void 0:d.intent)&&(null==c||c.success(null==d?void 0:d.intent)),null===(l=null===(n=null==c?void 0:c.iframe)||void 0===n?void 0:n.contentWindow)||void 0===l||l.postMessage({code:"on3dsSuccess",confirmResult:d},u)),window.removeEventListener("message",o),window.removeEventListener("message",C),window.removeEventListener("message",$)}catch(t){"hpp"===e?(e=>{const t=new CustomEvent("on3dsError",{detail:{error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(t)})(t):(t&&(null==c||c.fail(t)),null===(a=null===(d=null==c?void 0:c.iframe)||void 0===d?void 0:d.contentWindow)||void 0===a||a.postMessage({code:"on3dsError",error:t},u)),window.removeEventListener("message",$)}}};window.addEventListener("message",o)},x={"01":["250px","400px"],"02":["390px","400px"],"03":["500px","600px"],"04":["600px","400px"],"05":["100%","100%"]};let A="";const U=({intent_id:e="",env:t="prod"})=>{if(!A.includes(e)){const n="prod"===t?"9ozphlqx":"45ssiuz3",i=document.createElement("script");A=`${e}${Date.now()}`,i.src=`https://h.online-metrix.net/fp/tags.js?org_id=${n}&session_id=${A}`,document.body.appendChild(i)}return A},S="card",_=e=>{const{payment_consent_id:t,id:n,customer_id:i,currency:o,latest_payment_attempt:l}=e,{payment_method:d}=l||{},{id:a,card:s}=d||{},{bin:r,last4:c,brand:u}=s||{};return{intent_id:n,payment_consent_id:t||"",customer_id:i||"",currency:o||"",payment_method:{id:a||"",bin:r,last4:c,brand:u}}};class R extends o{constructor(e,t){var n,i,o,l,d;super(e,t),this.confirmIntent={resolver:null,reject:null,awaiting:!1},this.paymentConsent={resolver:null,reject:null,awaiting:!1},null===(n=this.iframe)||void 0===n||n.setAttribute("src",`${e}/#/elements/card?options=${JSON.stringify({...this.options,fonts:null===(i=ie.options)||void 0===i?void 0:i.fonts})}&lang=${null===(o=ie.options)||void 0===o?void 0:o.locale}`),null===(l=this.iframe)||void 0===l||l.setAttribute("name","Airwallex card element iframe"),null===(d=this.iframe)||void 0===d||d.setAttribute("title","Airwallex card element iframe"),this.addResizeListener(S),window.addEventListener("message",(e=>{var n,i,o,l,d,a,s,r,c,u,v,m,p,h,w,f,g,y,b,E,C,$,x,A,U,_;if(e.origin===this.gatewayUrl&&e.isTrusted&&(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.type)===S){if("onSubmit"===(null===(i=e.data)||void 0===i?void 0:i.code)){const t=new CustomEvent(null===(o=e.data)||void 0===o?void 0:o.code,{detail:{type:S},bubbles:!0,composed:!0});window.document.dispatchEvent(t),null===(l=this.domElement)||void 0===l||l.dispatchEvent(t)}if("onDynamicCurrencyConversion"===(null===(d=e.data)||void 0===d?void 0:d.code)){const t=new CustomEvent(null===(a=e.data)||void 0===a?void 0:a.code,{detail:{type:S},bubbles:!0,composed:!0});window.document.dispatchEvent(t),null===(s=this.domElement)||void 0===s||s.dispatchEvent(t)}if("onReady"===(null===(r=e.data)||void 0===r?void 0:r.code)){const n=new CustomEvent(null===(c=e.data)||void 0===c?void 0:c.code,{detail:{type:S},bubbles:!0,composed:!0});null===(u=this.domElement)||void 0===u||u.dispatchEvent(n),I({type:S,popupWidth:null===(v=null==t?void 0:t.style)||void 0===v?void 0:v.popupWidth,popupHeight:null===(m=null==t?void 0:t.style)||void 0===m?void 0:m.popupHeight,authFormContainer:null==t?void 0:t.authFormContainer})}if("onSuccess"===(null===(p=e.data)||void 0===p?void 0:p.code)&&this.success(null===(h=e.data)||void 0===h?void 0:h.intent),"onError"===(null===(w=e.data)||void 0===w?void 0:w.code)&&this.fail(null===(f=e.data)||void 0===f?void 0:f.error),["onFocus","onBlur","onChange"].includes(null===(g=e.data)||void 0===g?void 0:g.code)){const t=new CustomEvent(null===(y=e.data)||void 0===y?void 0:y.code,{detail:{type:S,complete:null!==(E=null===(b=e.data)||void 0===b?void 0:b.complete)&&void 0!==E&&E,empty:null!==($=null===(C=e.data)||void 0===C?void 0:C.empty)&&void 0!==$&&$,error:null===(x=e.data)||void 0===x?void 0:x.error,brand:null!==(U=null===(A=e.data)||void 0===A?void 0:A.brand)&&void 0!==U?U:""},bubbles:!0,composed:!0});window.document.dispatchEvent(t),null===(_=this.domElement)||void 0===_||_.dispatchEvent(t)}}}))}async confirm(e){var t,n,i;this.confirmIntent.awaiting&&console.warn("Should waiting previous confirm finished before execute new one!");const{id:o,intent_id:l,element:d,...a}=e||{},s=U({intent_id:l||o,env:null===(t=null==ie?void 0:ie.options)||void 0===t?void 0:t.env});return null===(i=null===(n=this.iframe)||void 0===n?void 0:n.contentWindow)||void 0===i||i.postMessage({code:"confirm",data:{...a,id:o||l,deviceId:s}},this.gatewayUrl),new Promise(((e,t)=>{this.confirmIntent.resolver=e,this.confirmIntent.reject=t,this.confirmIntent.awaiting=!0}))}async createPaymentConsent(e){var t,n,i;this.paymentConsent.awaiting&&console.warn("Should waiting previous createPaymentConsent finished before execute new one!");const{element:o,intent_id:l,...d}=e,a=U({intent_id:l,env:null===(t=null==ie?void 0:ie.options)||void 0===t?void 0:t.env});return null===(i=null===(n=this.iframe)||void 0===n?void 0:n.contentWindow)||void 0===i||i.postMessage({code:"createPaymentConsent",data:{...d,deviceId:a,intent_id:l}},this.gatewayUrl),new Promise(((e,t)=>{this.paymentConsent.resolver=e,this.paymentConsent.reject=t,this.paymentConsent.awaiting=!0}))}success(e){this.confirmIntent.awaiting&&this.confirmIntent.resolver&&this.confirmIntent.resolver(e),this.paymentConsent.awaiting&&this.paymentConsent.resolver&&this.paymentConsent.resolver(_(e)),this.confirmIntent.awaiting=!1,this.paymentConsent.awaiting=!1}fail(e){this.confirmIntent.awaiting&&this.confirmIntent.reject&&this.confirmIntent.reject(e),this.paymentConsent.awaiting&&this.paymentConsent.reject&&this.paymentConsent.reject(e),this.confirmIntent={resolver:null,reject:null,awaiting:!1},this.paymentConsent={resolver:null,reject:null,awaiting:!1}}}const j="cardNumber";class W extends o{constructor(e,t){var n,i,o,l,d;super(e,t),this.retrieve={resolver:null,reject:null,awaiting:!1},this.confirmIntent={resolver:null,reject:null,awaiting:!1},this.createMethod={resolver:null,reject:null,awaiting:!1},this.paymentConsent={resolver:null,reject:null,awaiting:!1},null===(n=this.iframe)||void 0===n||n.setAttribute("src",`${e}/#/elements/card-number?options=${encodeURIComponent(JSON.stringify({...this.options,fonts:null===(i=ie.options)||void 0===i?void 0:i.fonts}))}&lang=${null===(o=ie.options)||void 0===o?void 0:o.locale}`),null===(l=this.iframe)||void 0===l||l.setAttribute("name","Airwallex card number element iframe"),null===(d=this.iframe)||void 0===d||d.setAttribute("title","Airwallex card number element iframe"),this.addResizeListener(j),window.addEventListener("message",(e=>{var n,i,o,l,d,a,s,r,c,u,v,m,p,h,w,f,g,y,b,E,C,$,x,A,U,S,_,R,W,L,M,D,T,F,P;if(e.origin===this.gatewayUrl&&e.isTrusted&&(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.type)===j){if("onSubmit"===(null===(i=e.data)||void 0===i?void 0:i.code)){const t=new CustomEvent(null===(o=e.data)||void 0===o?void 0:o.code,{detail:{type:j},bubbles:!0,composed:!0});window.document.dispatchEvent(t),null===(l=this.domElement)||void 0===l||l.dispatchEvent(t)}if("onDynamicCurrencyConversion"===(null===(d=e.data)||void 0===d?void 0:d.code)){const t=new CustomEvent(null===(a=e.data)||void 0===a?void 0:a.code,{detail:{type:j},bubbles:!0,composed:!0});window.document.dispatchEvent(t),null===(s=this.domElement)||void 0===s||s.dispatchEvent(t)}if("onReady"===(null===(r=e.data)||void 0===r?void 0:r.code)){const n=new CustomEvent(null===(c=e.data)||void 0===c?void 0:c.code,{detail:{type:null===(u=e.data)||void 0===u?void 0:u.type},bubbles:!0,composed:!0});null===(v=this.domElement)||void 0===v||v.dispatchEvent(n),I({type:j,popupWidth:null===(m=null==t?void 0:t.style)||void 0===m?void 0:m.popupWidth,popupHeight:null===(p=null==t?void 0:t.style)||void 0===p?void 0:p.popupHeight,authFormContainer:null==t?void 0:t.authFormContainer})}if("onSuccess"===(null===(h=e.data)||void 0===h?void 0:h.code)&&(this.confirmIntent.resolver||this.paymentConsent.resolver)&&this.success(null===(w=e.data)||void 0===w?void 0:w.intent),"onError"===(null===(f=e.data)||void 0===f?void 0:f.code)&&(this.confirmIntent.reject||this.paymentConsent.reject)&&this.fail(null===(g=e.data)||void 0===g?void 0:g.error),"onIntentRetrieved"===(null===(y=e.data)||void 0===y?void 0:y.code)&&this.retrieve.resolver&&this.success(null===(b=e.data)||void 0===b?void 0:b.intent),"onRetrieveIntentError"===(null===(E=e.data)||void 0===E?void 0:E.code)&&(this.fail(null===(C=e.data)||void 0===C?void 0:C.error),this.retrieve.awaiting=!1),"onPaymentMethodCreated"===(null===($=e.data)||void 0===$?void 0:$.code)&&this.createMethod.resolver&&(this.createMethod.resolver(null===(x=e.data)||void 0===x?void 0:x.paymentMethod),this.createMethod.awaiting=!1),"onPaymentMethodCreatedError"===(null===(A=e.data)||void 0===A?void 0:A.code)&&this.fail(null===(U=e.data)||void 0===U?void 0:U.error),["onFocus","onBlur","onChange"].includes(null===(S=e.data)||void 0===S?void 0:S.code)){const t=new CustomEvent(null===(_=e.data)||void 0===_?void 0:_.code,{detail:{type:j,complete:null!==(W=null===(R=e.data)||void 0===R?void 0:R.complete)&&void 0!==W&&W,empty:null!==(M=null===(L=e.data)||void 0===L?void 0:L.empty)&&void 0!==M&&M,error:null===(D=e.data)||void 0===D?void 0:D.error,brand:null!==(F=null===(T=e.data)||void 0===T?void 0:T.brand)&&void 0!==F?F:""},bubbles:!0,composed:!0});window.document.dispatchEvent(t),null===(P=this.domElement)||void 0===P||P.dispatchEvent(t)}}}))}async confirm(e){var t,n,i;this.confirmIntent.awaiting&&console.warn("Should waiting previous confirm finished before execute new one!");const{id:o,intent_id:l,element:d,...a}=e||{},s=U({intent_id:l||o,env:null===(t=null==ie?void 0:ie.options)||void 0===t?void 0:t.env});return null===(i=null===(n=this.iframe)||void 0===n?void 0:n.contentWindow)||void 0===i||i.postMessage({code:"confirm",data:{...a,id:o||l,deviceId:s}},this.gatewayUrl),new Promise(((e,t)=>{this.confirmIntent.resolver=e,this.confirmIntent.reject=t,this.confirmIntent.awaiting=!0}))}async createPaymentMethod(e){var t,n;this.createMethod.awaiting&&console.warn("Should waiting previous createPaymentMethod finished before execute new one!");const{element:i,...o}=e||{};return null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"createPaymentMethod",data:o},this.gatewayUrl),new Promise(((e,t)=>{this.createMethod.resolver=e,this.createMethod.reject=t,this.createMethod.awaiting=!0}))}async createPaymentConsent(e){var t,n,i;this.paymentConsent.awaiting&&console.warn("Should waiting previous createPaymentConsent finished before execute new one!");const{element:o,intent_id:l,...d}=e,a=U({intent_id:l,env:null===(t=null==ie?void 0:ie.options)||void 0===t?void 0:t.env});return null===(i=null===(n=this.iframe)||void 0===n?void 0:n.contentWindow)||void 0===i||i.postMessage({code:"createPaymentConsent",data:{...d,deviceId:a,intent_id:l}},this.gatewayUrl),new Promise(((e,t)=>{this.paymentConsent.resolver=e,this.paymentConsent.reject=t,this.paymentConsent.awaiting=!0}))}async getPaymentIntent(e,t){var n,i;return this.retrieve.awaiting&&console.warn("Should waiting previous getPaymentIntent finished before execute new one!"),null===(i=null===(n=this.iframe)||void 0===n?void 0:n.contentWindow)||void 0===i||i.postMessage({code:"getIntent",data:{id:e,client_secret:t}},this.gatewayUrl),new Promise(((e,t)=>{this.retrieve.resolver=e,this.retrieve.reject=t,this.retrieve.awaiting=!0}))}success(e){this.confirmIntent.awaiting&&this.confirmIntent.resolver&&this.confirmIntent.resolver(e),this.retrieve.awaiting&&this.retrieve.resolver&&this.retrieve.resolver(e),this.paymentConsent.awaiting&&this.paymentConsent.resolver&&this.paymentConsent.resolver(_(e)),this.confirmIntent.awaiting=!1,this.retrieve.awaiting=!1,this.paymentConsent.awaiting=!1}fail(e){this.confirmIntent.awaiting&&this.confirmIntent.reject&&this.confirmIntent.reject(e),this.retrieve.awaiting&&this.retrieve.reject&&this.retrieve.reject(e),this.createMethod.awaiting&&this.createMethod.reject&&this.createMethod.reject(e),this.paymentConsent.awaiting&&this.paymentConsent.reject&&this.paymentConsent.reject(e),this.retrieve={resolver:null,reject:null,awaiting:!1},this.confirmIntent={resolver:null,reject:null,awaiting:!1},this.createMethod={resolver:null,reject:null,awaiting:!1},this.paymentConsent={resolver:null,reject:null,awaiting:!1}}}const L="expiry";class M extends o{constructor(e,t){var n,i,o,l,d;super(e,t),null===(n=this.iframe)||void 0===n||n.setAttribute("src",`${e}/#/elements/expiry?options=${encodeURIComponent(JSON.stringify({...this.options,fonts:null===(i=ie.options)||void 0===i?void 0:i.fonts}))}&lang=${null===(o=ie.options)||void 0===o?void 0:o.locale}`),null===(l=this.iframe)||void 0===l||l.setAttribute("name","Airwallex expiry number element iframe"),null===(d=this.iframe)||void 0===d||d.setAttribute("title","Airwallex expiry number element iframe"),this.addResizeListener(L),window.addEventListener("message",(e=>{var t,n,i,o,l,d,a,s,r,c,u,v,m;if(e.origin===this.gatewayUrl&&e.isTrusted&&(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)===L){if("onReady"===(null===(n=e.data)||void 0===n?void 0:n.code)){const t=new CustomEvent(null===(i=e.data)||void 0===i?void 0:i.code,{detail:{type:null===(o=e.data)||void 0===o?void 0:o.type},bubbles:!0,composed:!0});null===(l=this.domElement)||void 0===l||l.dispatchEvent(t)}if(["onFocus","onBlur","onChange"].includes(null===(d=e.data)||void 0===d?void 0:d.code)){const t=new CustomEvent(null===(a=e.data)||void 0===a?void 0:a.code,{detail:{type:L,complete:null!==(r=null===(s=e.data)||void 0===s?void 0:s.complete)&&void 0!==r&&r,empty:null!==(u=null===(c=e.data)||void 0===c?void 0:c.empty)&&void 0!==u&&u,error:null===(v=e.data)||void 0===v?void 0:v.error},bubbles:!0,composed:!0});window.document.dispatchEvent(t),null===(m=this.domElement)||void 0===m||m.dispatchEvent(t)}}}))}}const D="cvc";class T extends o{constructor(e,t){var n,i,o,l,d;super(e,t),this.confirmIntent={resolver:null,reject:null,awaiting:!1},null===(n=this.iframe)||void 0===n||n.setAttribute("src",`${e}/#/elements/cvc?options=${encodeURIComponent(JSON.stringify({...this.options,fonts:null===(i=ie.options)||void 0===i?void 0:i.fonts}))}&lang=${null===(o=ie.options)||void 0===o?void 0:o.locale}`),null===(l=this.iframe)||void 0===l||l.setAttribute("name","Airwallex cvc number element iframe"),null===(d=this.iframe)||void 0===d||d.setAttribute("title","Airwallex cvc number element iframe"),this.addResizeListener("cvc"),window.addEventListener("message",(e=>{var n,i,o,l,d,a,s,r,c,u,v,m,p,h,w,f,g,y,b,E,C,$,x,A,U,S,_,R,j;if(e.origin===this.gatewayUrl&&e.isTrusted&&(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.type)===D){if("onSubmit"===(null===(i=e.data)||void 0===i?void 0:i.code)){const t=new CustomEvent(null===(o=e.data)||void 0===o?void 0:o.code,{detail:{type:D},bubbles:!0,composed:!0});window.document.dispatchEvent(t),null===(l=this.domElement)||void 0===l||l.dispatchEvent(t)}if("onDynamicCurrencyConversion"===(null===(d=e.data)||void 0===d?void 0:d.code)){const t=new CustomEvent(null===(a=e.data)||void 0===a?void 0:a.code,{detail:{type:D},bubbles:!0,composed:!0});window.document.dispatchEvent(t),null===(s=this.domElement)||void 0===s||s.dispatchEvent(t)}if("onReady"===(null===(r=e.data)||void 0===r?void 0:r.code)){const n=new CustomEvent(null===(c=e.data)||void 0===c?void 0:c.code,{detail:{type:null===(u=e.data)||void 0===u?void 0:u.type},bubbles:!0,composed:!0});null===(v=this.domElement)||void 0===v||v.dispatchEvent(n),I({type:D,popupWidth:null===(m=null==t?void 0:t.style)||void 0===m?void 0:m.popupWidth,popupHeight:null===(p=null==t?void 0:t.style)||void 0===p?void 0:p.popupHeight,authFormContainer:null==t?void 0:t.authFormContainer})}if("onSuccess"===(null===(h=e.data)||void 0===h?void 0:h.code)&&this.confirmIntent.resolver&&this.success(null===(w=e.data)||void 0===w?void 0:w.intent),"onError"===(null===(f=e.data)||void 0===f?void 0:f.code)&&this.confirmIntent.reject&&this.fail(null===(g=e.data)||void 0===g?void 0:g.error),["onFocus","onBlur","onChange"].includes(null===(y=e.data)||void 0===y?void 0:y.code)){const t=new CustomEvent(null===(b=e.data)||void 0===b?void 0:b.code,{detail:{type:D,complete:null!==(C=null===(E=e.data)||void 0===E?void 0:E.complete)&&void 0!==C&&C,empty:null!==(x=null===($=e.data)||void 0===$?void 0:$.empty)&&void 0!==x&&x,error:null===(A=e.data)||void 0===A?void 0:A.error},bubbles:!0,composed:!0});window.document.dispatchEvent(t),null===(U=this.domElement)||void 0===U||U.dispatchEvent(t)}}e.origin===this.gatewayUrl&&e.isTrusted&&"cardNumber"===(null===(S=e.data)||void 0===S?void 0:S.type)&&"onChange"===(null===(_=e.data)||void 0===_?void 0:_.code)&&(null===(j=null===(R=this.iframe)||void 0===R?void 0:R.contentWindow)||void 0===j||j.postMessage({code:"update",options:{cvcLength:e.data.cvcLength}},this.gatewayUrl))}))}async confirm(e){var t,n,i;this.confirmIntent.awaiting&&console.warn("Should waiting previous confirm finished before execute new one!");const{id:o,intent_id:l,element:d,...a}=e||{},s=U({intent_id:l||o,env:null===(t=null==ie?void 0:ie.options)||void 0===t?void 0:t.env});return null===(i=null===(n=this.iframe)||void 0===n?void 0:n.contentWindow)||void 0===i||i.postMessage({code:"confirm",data:{...a,id:o||l,deviceId:s}},this.gatewayUrl),new Promise(((e,t)=>{this.confirmIntent.resolver=e,this.confirmIntent.reject=t,this.confirmIntent.awaiting=!0}))}success(e){this.confirmIntent.resolver&&this.confirmIntent.resolver(e),this.confirmIntent.awaiting=!1}fail(e){this.confirmIntent.awaiting&&this.confirmIntent.reject&&this.confirmIntent.reject(e),this.confirmIntent={resolver:null,reject:null,awaiting:!1}}}class F extends o{constructor(e,t){var n,i,o,l,d,a;super(e,t);const{intent:s}=t||{},r=U({intent_id:null==s?void 0:s.id,env:null===(n=null==ie?void 0:ie.options)||void 0===n?void 0:n.env});null===(i=this.iframe)||void 0===i||i.setAttribute("src",`${e}/#/elements/payment-request-button?options=${encodeURIComponent(JSON.stringify({...t,deviceId:r,fonts:null===(o=ie.options)||void 0===o?void 0:o.fonts}))}&lang=${null===(l=ie.options)||void 0===l?void 0:l.locale}`),null===(d=this.iframe)||void 0===d||d.setAttribute("name","Airwallex payment request element iframe"),null===(a=this.iframe)||void 0===a||a.setAttribute("title","Airwallex payment request element iframe"),this.addResizeListener("paymentRequestButton"),window.addEventListener("message",(e=>{var n,i,o,l,d,a,s,r,c,u,v;if(e.origin===this.gatewayUrl&&e.isTrusted&&"paymentRequestButton"===(null===(n=e.data)||void 0===n?void 0:n.type))if("onReady"===(null===(i=e.data)||void 0===i?void 0:i.code)){I({type:"paymentRequestButton",popupWidth:null===(o=null==t?void 0:t.style)||void 0===o?void 0:o.popupWidth,popupHeight:null===(l=null==t?void 0:t.style)||void 0===l?void 0:l.popupHeight,authFormContainer:null==t?void 0:t.authFormContainer});const n=new CustomEvent(null===(d=e.data)||void 0===d?void 0:d.code,{detail:{type:null===(a=e.data)||void 0===a?void 0:a.type},bubbles:!0,composed:!0});null===(s=this.domElement)||void 0===s||s.dispatchEvent(n)}else"onSuccess"===(null===(r=e.data)||void 0===r?void 0:r.code)?this.success(null===(c=e.data)||void 0===c?void 0:c.intent):"onError"===(null===(u=e.data)||void 0===u?void 0:u.code)&&this.fail(null===(v=e.data)||void 0===v?void 0:v.error)}))}success(e){const t=new CustomEvent("onSuccess",{detail:{type:"paymentRequestButton",intent:e},bubbles:!0,composed:!0});window.document.dispatchEvent(t)}fail(e){const t=new CustomEvent("onError",{detail:{type:"paymentRequestButton",error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(t)}}const P="dropIn";class z extends o{constructor(e,n){var i,o,l,d,a,s;super(e,n);const{intent_id:r}=n||{},c=U({intent_id:r,env:null===(i=null==ie?void 0:ie.options)||void 0===i?void 0:i.env});null===(o=this.iframe)||void 0===o||o.setAttribute("src",`${e}/#/elements/dropin?options=${encodeURIComponent(JSON.stringify({...n,deviceId:c,fonts:null===(l=ie.options)||void 0===l?void 0:l.fonts}))}&lang=${null===(d=ie.options)||void 0===d?void 0:d.locale}`),null===(a=this.iframe)||void 0===a||a.setAttribute("name","Airwallex dropIn element iframe"),null===(s=this.iframe)||void 0===s||s.setAttribute("title","Airwallex dropIn element iframe"),this.addResizeListener(P),window.addEventListener("message",(e=>{var i,o,l,d,a,s,r,c,u,v,m,p,h;if(e.origin===this.gatewayUrl&&e.isTrusted&&(null===(i=e.data)||void 0===i?void 0:i.type)===P){if("onReady"===(null===(o=e.data)||void 0===o?void 0:o.code)){I({type:P,popupWidth:null===(l=null==n?void 0:n.style)||void 0===l?void 0:l.popupWidth,popupHeight:null===(d=null==n?void 0:n.style)||void 0===d?void 0:d.popupHeight,authFormContainer:null==n?void 0:n.authFormContainer});const t=new CustomEvent(null===(a=e.data)||void 0===a?void 0:a.code,{detail:{type:P},bubbles:!0,composed:!0});null===(s=this.domElement)||void 0===s||s.dispatchEvent(t)}if("onRedirect"===(null===(r=e.data)||void 0===r?void 0:r.code)){const{redirectUrl:n,formData:i}=null!==(u=null===(c=e.data)||void 0===c?void 0:c.redirectPayload)&&void 0!==u?u:{};i?t(i,n):window.location.href=n}else"onSuccess"===(null===(v=e.data)||void 0===v?void 0:v.code)?this.success(null===(m=e.data)||void 0===m?void 0:m.intent):"onError"===(null===(p=e.data)||void 0===p?void 0:p.code)&&this.fail(null===(h=e.data)||void 0===h?void 0:h.error)}}))}success(e){var t;const n=new CustomEvent("onSuccess",{detail:{type:P,intent:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)}fail(e){var t;const n=new CustomEvent("onError",{detail:{type:P,error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)}}const N="fullFeaturedCard";class q extends o{constructor(e,t){var n,i,o,l,d,a;super(e,t);const{intent:s}=t||{},r=U({intent_id:null==s?void 0:s.id,env:null===(n=null==ie?void 0:ie.options)||void 0===n?void 0:n.env});null===(i=this.iframe)||void 0===i||i.setAttribute("src",`${e}/#/elements/full-featured-card?options=${encodeURIComponent(JSON.stringify({...t,deviceId:r,fonts:null===(o=ie.options)||void 0===o?void 0:o.fonts}))}&lang=${null===(l=ie.options)||void 0===l?void 0:l.locale}`),null===(d=this.iframe)||void 0===d||d.setAttribute("name","Airwallex full featured card element iframe"),null===(a=this.iframe)||void 0===a||a.setAttribute("title","Airwallex full featured card element iframe"),this.addResizeListener(N),window.addEventListener("message",(e=>{var n,i,o,l,d,a,s,r,c,u,v;if(e.origin===this.gatewayUrl&&e.isTrusted&&(null===(n=e.data)||void 0===n?void 0:n.type)===N)if("onReady"===(null===(i=e.data)||void 0===i?void 0:i.code)){I({type:N,popupWidth:null===(o=null==t?void 0:t.style)||void 0===o?void 0:o.popupWidth,popupHeight:null===(l=null==t?void 0:t.style)||void 0===l?void 0:l.popupHeight,authFormContainer:null==t?void 0:t.authFormContainer});const n=new CustomEvent(null===(d=e.data)||void 0===d?void 0:d.code,{detail:{type:null===(a=e.data)||void 0===a?void 0:a.type},bubbles:!0,composed:!0});null===(s=this.domElement)||void 0===s||s.dispatchEvent(n)}else"onSuccess"===(null===(r=e.data)||void 0===r?void 0:r.code)?this.success(null===(c=e.data)||void 0===c?void 0:c.intent):"onError"===(null===(u=e.data)||void 0===u?void 0:u.code)&&this.fail(null===(v=e.data)||void 0===v?void 0:v.error)}))}update(e){var t,n,i;this.options={...this.options,...e};const{intent:o}=this.options||{},l=U({intent_id:null==o?void 0:o.id,env:null===(t=null==ie?void 0:ie.options)||void 0===t?void 0:t.env});null===(i=null===(n=this.iframe)||void 0===n?void 0:n.contentWindow)||void 0===i||i.postMessage({code:"update",options:{...e,deviceId:l}},this.gatewayUrl)}success(e){var t;const n=new CustomEvent("onSuccess",{detail:{type:N,intent:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)}fail(e){var t;const n=new CustomEvent("onError",{detail:{type:N,error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)}}const B="wechat";class H extends o{constructor(e,t){var n,i,o,l,d;super(e,t),null===(n=this.iframe)||void 0===n||n.setAttribute("src",`${e}/#/elements/wechat?options=${encodeURIComponent(JSON.stringify({...this.options,fonts:null===(i=ie.options)||void 0===i?void 0:i.fonts}))}&lang=${null===(o=ie.options)||void 0===o?void 0:o.locale}`),null===(l=this.iframe)||void 0===l||l.setAttribute("name","Airwallex wechat element iframe"),null===(d=this.iframe)||void 0===d||d.setAttribute("title","Airwallex wechat element iframe"),this.addResizeListener(B),window.addEventListener("message",(e=>{var t,n,i,o,l,d;e.origin===this.gatewayUrl&&e.isTrusted&&(null===(t=e.data)||void 0===t?void 0:t.type)===B&&("onRedirect"===(null===(n=e.data)||void 0===n?void 0:n.code)?window.location.href=null===(i=e.data)||void 0===i?void 0:i.redirectUrl:"onSuccess"===(null===(o=e.data)||void 0===o?void 0:o.code)?this.success(null===(l=e.data)||void 0===l?void 0:l.intent):"onError"===(null===(d=e.data)||void 0===d?void 0:d.code)&&this.fail(e.data.error))}))}success(e){var t;const n=new CustomEvent("onSuccess",{detail:{type:B,intent:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)}fail(e){var t;const n=new CustomEvent("onError",{detail:{type:B,error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)}}const O="qrcode";class k extends o{constructor(e,t){var n,i,o,l,d;super(e,t),null===(n=this.iframe)||void 0===n||n.setAttribute("src",`${e}/#/elements/qrcode?options=${encodeURIComponent(JSON.stringify({...this.options,fonts:null===(i=ie.options)||void 0===i?void 0:i.fonts}))}&lang=${null===(o=ie.options)||void 0===o?void 0:o.locale}`),null===(l=this.iframe)||void 0===l||l.setAttribute("name","Airwallex qrcode element iframe"),null===(d=this.iframe)||void 0===d||d.setAttribute("title","Airwallex qrcode element iframe"),this.addResizeListener(O),window.addEventListener("message",(e=>{var t,n,i,o;e.origin===this.gatewayUrl&&e.isTrusted&&(null===(t=e.data)||void 0===t?void 0:t.type)===O&&("onSuccess"===(null===(n=e.data)||void 0===n?void 0:n.code)?this.success(null===(i=e.data)||void 0===i?void 0:i.intent):"onError"===(null===(o=e.data)||void 0===o?void 0:o.code)&&this.fail(e.data.error))}))}success(e){var t;const n=new CustomEvent("onSuccess",{detail:{type:O,intent:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)}fail(e){var t;const n=new CustomEvent("onError",{detail:{type:O,error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)}}class J extends o{constructor(e,n){var i,o,l,d,a;super(e,n),null===(i=this.iframe)||void 0===i||i.setAttribute("src",`${e}/#/elements/redirect?options=${encodeURIComponent(JSON.stringify({...this.options,fonts:null===(o=ie.options)||void 0===o?void 0:o.fonts}))}&lang=${null===(l=ie.options)||void 0===l?void 0:l.locale}`),null===(d=this.iframe)||void 0===d||d.setAttribute("name","Airwallex redirect element iframe"),null===(a=this.iframe)||void 0===a||a.setAttribute("title","Airwallex redirect element iframe"),this.addResizeListener("redirect"),window.addEventListener("message",(e=>{var i,o,l,d,a;if(e.origin===this.gatewayUrl&&e.isTrusted&&"redirect"===(null===(i=e.data)||void 0===i?void 0:i.type))if("onRedirect"===(null===(o=e.data)||void 0===o?void 0:o.code)){const{redirectUrl:i,method:o,formData:a}=null!==(d=null===(l=e.data)||void 0===l?void 0:l.redirectPayload)&&void 0!==d?d:{};o===(null==n?void 0:n.method)&&(a?t(a,i):window.location.href=i)}else"onError"===(null===(a=e.data)||void 0===a?void 0:a.code)&&this.fail(e.data.error)}))}fail(e){var t;const n=new CustomEvent("onError",{detail:{type:"redirect",error:e},bubbles:!0,composed:!0});null===(t=this.domElement)||void 0===t||t.dispatchEvent(n),window.document.dispatchEvent(n)}}const V=e=>e.startsWith("http://")||e.startsWith("https://")?encodeURIComponent(e):encodeURIComponent(`https://${e}`),Z=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,G=e=>"string"==typeof e,K=e=>"boolean"==typeof e,Q=e=>"string"==typeof e&&Z.test(e),X=e=>"object"==typeof e&&null!==e,Y={intent_id:{validate:G,format:e=>`${e}`},client_secret:{validate:G,format:e=>`${e}`},theme:{validate:X,format:e=>JSON.stringify(e)},customer_id:{validate:G,format:e=>`${e}`},components:{validate:X,format:e=>JSON.stringify(e)},autoCapture:{validate:K,format:e=>`${e}`},successUrl:{validate:Q,format:e=>V(`${e}`)},failUrl:{validate:Q,format:e=>V(`${e}`)},cancelUrl:{validate:Q,format:e=>V(`${e}`)},logoUrl:{validate:Q,format:e=>V(`${e}`)},locale:{validate:G,format:e=>`${e}`},withBilling:{validate:K,format:e=>`${e}`},mode:{validate:G,format:e=>`${e}`},recurringOptions:{validate:X,format:e=>encodeURIComponent(JSON.stringify(e))},currency:{validate:G,format:e=>`${e}`},country_code:{validate:G,format:e=>`${e}`},shopper_name:{validate:G,format:e=>`${e}`},shopper_phone:{validate:G,format:e=>`${e}`},shopper_email:{validate:G,format:e=>`${e}`}},ee=e=>`https://${n[e]||"checkout.airwallex.com"}`,te=["cardNumber","expiry","cvc","paymentRequestButton","card","wechat","qrcode","redirect","dropIn","fullFeaturedCard"],ne=[...te,"threeDsFrictionless","threeDsChallenge"],ie={gatewayUrl:"",options:{}},oe={cardNumber:null,expiry:null,cvc:null,threeDsFrictionless:null,threeDsChallenge:null,paymentRequestButton:null,card:null,wechat:null,qrcode:null,redirect:null,dropIn:null,fullFeaturedCard:null},le=e=>{var t;return ne.includes(e)?(null===(t=oe[e])||void 0===t||t.destroy(),oe[e]=null,!0):(console.warn(`destroyElement with type: ${e} not support!`),!1)},de=e=>ne.includes(e)?oe[e]:(console.warn(`getElement with type: ${e} not support!`),null),ae=(e,t)=>ne.includes(e)?(oe[e]=t,!0):(console.warn(`destroyElement with type: ${e} not support!`),!1);return e.confirmPaymentIntent=async e=>(console.info(`Confirm intent ${(null==e?void 0:e.intent_id)||(null==e?void 0:e.id)} with client secret: ${null==e?void 0:e.client_secret}`),(null==e?void 0:e.element)?(null==e?void 0:e.element).confirm(e):(console.warn("Card number element must be provided for card payment confirm!"),!1)),e.confirmPaymentIntentWithSavedCard=async e=>(console.info(`Confirm intent ${(null==e?void 0:e.intent_id)||(null==e?void 0:e.id)} with client secret: ${null==e?void 0:e.client_secret}`),(null==e?void 0:e.element)&&(null==e?void 0:e.methodId)?(null==e?void 0:e.element).confirm(e):(console.warn("Payment method id must be provided for cvc payment confirm!"),!1)),e.createElement=(e,t)=>{var n;const i=null!=t?t:{origin:""};return i.origin||(i.origin=null===(n=ie.options)||void 0===n?void 0:n.origin),te.includes(e)?"cardNumber"===e?(oe[e]=new W(ie.gatewayUrl,i),oe[e]):"card"===e?(oe[e]=new R(ie.gatewayUrl,i),oe[e]):"fullFeaturedCard"===e?(oe[e]=new q(ie.gatewayUrl,i),oe[e]):"wechat"===e?(oe[e]=new H(ie.gatewayUrl,i),oe[e]):"qrcode"===e?(oe[e]=new k(ie.gatewayUrl,i),oe[e]):"redirect"===e?(oe[e]=new J(ie.gatewayUrl,i),oe[e]):"paymentRequestButton"===e?(oe[e]=new F(ie.gatewayUrl,i),oe[e]):"dropIn"===e?(oe[e]=new z(ie.gatewayUrl,i),oe[e]):"expiry"===e||"cvc"===e?(oe[e]="expiry"===e?new M(ie.gatewayUrl,i):new T(ie.gatewayUrl,i),window.addEventListener("message",(t=>{var n,i,o,l,d,a;t.origin===ie.gatewayUrl&&t.isTrusted&&e===(null===(n=t.data)||void 0===n?void 0:n.type)&&"onChange"===(null===(i=t.data)||void 0===i?void 0:i.code)&&(null===(d=null===(l=null===(o=oe.cardNumber)||void 0===o?void 0:o.iframe)||void 0===l?void 0:l.contentWindow)||void 0===d||d.postMessage({code:`update_${null===(a=t.data)||void 0===a?void 0:a.type}`,data:t.data},ie.gatewayUrl))})),oe[e]):null:(console.warn(`createElement with type: ${e} not support!`),null)},e.createPaymentConsent=async e=>(console.info(`Create payment consent with client secret: ${e.client_secret}`),(null==e?void 0:e.element)?(null==e?void 0:e.element).createPaymentConsent(e):(console.warn("Either payment method id or element must be provided for create payment consent!"),!1)),e.createPaymentMethod=async(e,t)=>(console.info(`Create payment method with client secret: ${e}`),(null==t?void 0:t.element)?(null==t?void 0:t.element).createPaymentMethod({...t,client_secret:e}):(console.warn("Either payment method id or element must be provided for payment method create!"),!1)),e.destroyElement=le,e.get3dsReturnUrl=e=>{const{env:t,checkoutOrigin:o}=e;return`${i[t||"prod"]}/api/v1/checkout/elements/3ds?origin=https://${n[t||"prod"]}&checkoutOrigin=${o||window.location.origin}`},e.getBrowserInfo=e=>{const{navigator:t,screen:n}=window||{},{language:i}=t||{},{colorDepth:o,height:l,width:d}=n||{},{intent_id:a,env:s}=e||{};let r;return e&&(r=U({intent_id:a,env:s})),{device_id:r,screen_height:l,screen_width:d,screen_color_depth:o,language:i,timezone:(new Date).getTimezoneOffset(),browser:{java_enabled:window.navigator.javaEnabled(),javascript_enabled:!0,user_agent:t.userAgent}}},e.getDeviceFingerprint=U,e.getElement=de,e.getPaymentIntent=async(e,t)=>{var n;return(null===(n=oe.cardNumber)||void 0===n?void 0:n.getPaymentIntent(e,t))||!1},e.handle3ds=e=>{const{cardBin:t,next_action:i,authFormContainer:o,intent:l,challengeWindowSize:d,env:a}=e;return E({gatewayUrl:`https://${n[a]}`,cardBin:t,intent:l,next_action:i,authFormContainer:o,componentType:"api",challengeWindowSize:d})},e.handle3dsFlow=I,e.init=e=>{!(null==e?void 0:e.env)&&ie.gatewayUrl||(ie.gatewayUrl=ee((null==e?void 0:e.env)||"prod")),ie.options=e},e.redirectToCheckout=e=>{const{env:t,...n}=e,i=(e=>{const t={};return Object.keys(Y).forEach((n=>{const i=e[n];i&&Y[n].validate(i)&&(t[n]=Y[n].format(i))})),t})(n),{id:o,...l}=i||{},d=Object.keys(l),a=[];d.forEach((e=>{a.push(`${e}=${l[e]}`)})),a.push(`from=${window.location.origin}`);const s="recurring"===e.mode?`${ee(t||"prod")}/#/standalone/recurring?${a.join("&")}`:`${ee(t||"prod")}/#/standalone/checkout/${o||(null==l?void 0:l.intent_id)}?${a.join("&")}`;window.location.href=s},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
/* Airwallex @Charlie.Lang */
