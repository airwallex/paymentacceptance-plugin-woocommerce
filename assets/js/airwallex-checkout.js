var Airwallex=function(e){"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function i(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}function a(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{d(o.next(e))}catch(e){a(e)}}function l(e){try{d(o.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}d((o=o.apply(e,t||[])).next())}))}function r(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function l(e,t,n){if(n||2===arguments.length)for(var o,i=0,a=t.length;i<a;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}var d,s={prod:"checkout.airwallex.com",demo:"checkout-demo.airwallex.com",staging:"checkout-staging.airwallex.com",qa:"checkoutui.qa.awx.im",preview:"checkoutui.preview.awx.im",dev:"localhost:3000"},c={prod:"https://pci-api.airwallex.com",demo:"https://pci-api-demo.airwallex.com",staging:"https://pci-api-staging.airwallex.com",qa:"https://pci-api-qa.airwallex.com",preview:"https://pci-api-preview.airwallex.com",dev:"https://localhost:8080"},u=function(e){return"https://".concat(s[e]||"checkout.airwallex.com")},v=function(){function e(e,t){var n,o,i=this;this.domElement=null,this.gatewayUrl=e,this.options=t,this.iframe=window.document.createElement("iframe"),this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("allowtransparency","true"),this.iframe.setAttribute("importance","high"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("allowpaymentrequest","true"),null===(n=this.iframe)||void 0===n||n.setAttribute("style","\n        height: 0;\n        width: 100%;\n        display: block;\n      "),o=function(e){var t,n,o;if(e.origin===i.gatewayUrl&&e.isTrusted&&"onReady"===(null===(t=e.data)||void 0===t?void 0:t.code)){var a=new CustomEvent(null===(n=e.data)||void 0===n?void 0:n.code,{detail:{type:null===(o=e.data)||void 0===o?void 0:o.type},bubbles:!0,composed:!0});window.document.dispatchEvent(a)}},window.addEventListener("message",(function(e){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify(e.data)),o(e)}))}return e.prototype.addResizeListener=function(e){var t=this;window.addEventListener("message",(function(n){var o,i,a,r;if(n.origin===t.gatewayUrl&&n.isTrusted&&"onResize"===(null===(o=n.data)||void 0===o?void 0:o.code)&&e===(null===(i=n.data)||void 0===i?void 0:i.type)){var l=null===(a=t.iframe)||void 0===a?void 0:a.style;l&&(l.height="".concat(null===(r=n.data)||void 0===r?void 0:r.height,"px"))}}))},e.prototype.mount=function(e){if("string"!=typeof e)return(null==e?void 0:e.hasChildNodes())&&(e.innerHTML=""),this.iframe&&e.appendChild(this.iframe),this.domElement=e,e;var t=window.document.getElementById(e);return(null==t?void 0:t.hasChildNodes())&&(t.innerHTML=""),this.iframe&&(null==t||t.appendChild(this.iframe)),t&&(this.domElement=t),t},e.prototype.blur=function(){var e,t;null===(t=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({code:"blur"},this.gatewayUrl)},e.prototype.clear=function(){var e,t;null===(t=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({code:"clear"},this.gatewayUrl)},e.prototype.destroy=function(){var e;this.clear(),null===(e=this.iframe)||void 0===e||e.remove(),this.iframe=null},e.prototype.focus=function(){var e,t;null===(t=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({code:"focus"},this.gatewayUrl)},e.prototype.pressArrowKey=function(e,t){var n,o=new CustomEvent("onPressArrowKey",{detail:{type:e,arrowKey:t},bubbles:!0,composed:!0});null===(n=this.domElement)||void 0===n||n.dispatchEvent(o)},e.prototype.unmount=function(){var e;this.clear(),this.iframe&&(null===(e=this.domElement)||void 0===e||e.removeChild(this.iframe))},e.prototype.update=function(e){var t,n;this.options=o(o({},this.options),e),null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"update",options:e},this.gatewayUrl)},e.prototype.confirm=function(){return a(this,void 0,void 0,(function(){return r(this,(function(e){throw new Error("Confirm is not supported in ElementBase")}))}))},e.prototype.success=function(e,t){throw new Error("Call success with ".concat(e.id||(null==t?void 0:t.id)," is not supported in ElementBase"))},e.prototype.fail=function(e){throw new Error("Call fail with ".concat(e.code,": ").concat(e.message," is not supported in ElementBase"))},e}(),p=function(){try{return"ApplePaySession"in window&&(null===ApplePaySession||void 0===ApplePaySession?void 0:ApplePaySession.supportsVersion(4))&&(null===ApplePaySession||void 0===ApplePaySession?void 0:ApplePaySession.canMakePayments())}catch(e){console.error("ApplePaySession is not supported in iframe")}};!function(e){e.onJsError="onJsError",e.onConsoleError="onConsoleError",e.onClickRedirectElementConfirmButton="onClickRedirectElementConfirmButton",e.onLpmRedirect="onLpmRedirect",e.onStorageNotSupport="onStorageNotSupport",e.onCollectMerchantInfo="onCollectMerchantInfo",e.onChunkLoadFail="onChunkLoadFail",e.onChunkLoadSuccess="onChunkLoadSuccess",e.onLogRequest="onLogRequest",e.onLogResponse="onLogResponse",e.onLogApiError="onLogApiError",e.onPageLoad="onPageLoad",e.onCollectRequestToApplePay="onCollectRequestToApplePay",e.onCollectResponseFromApplePay="onCollectResponseFromApplePay",e.onCollectRequestToGooglePay="onCollectRequestToGooglePay",e.onCollectResponseFromGooglePay="onCollectResponseFromGooglePay",e.onUnexpectedBehavior="onUnexpectedBehavior",e.onDecodeJwtError="onDecodeJwtError",e.onLoadTranslationResource="onLoadTranslationResource",e.onLoadPayByLinkPage="onLoadPayByLinkPage",e.onReceiveConfirmCode="onReceiveConfirmCode",e.onReceiveCreateConsentCode="onReceiveCreateConsentCode",e.onReceiveCreatePaymentMethodCode="onReceiveCreatePaymentMethodCode",e.onSaveMethodForFutureUse="onSaveMethodForFutureUse",e.onToggleBillingInfo="onToggleBillingInfo"}(d||(d={}));var m,f,h,y,w,g,b,E,C=function(e){function t(t,n,o){var i,a,r,l,d=e.call(this,t,o)||this;return d.confirmResponse=n,null===(i=d.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/3ds-frictionless?options=").concat(encodeURIComponent(JSON.stringify(d.options)),"&lang=").concat(null===(a=Ae.options)||void 0===a?void 0:a.locale)),null===(r=d.iframe)||void 0===r||r.setAttribute("name","Airwallex 3DS frictionless iframe"),null===(l=d.iframe)||void 0===l||l.setAttribute("title","Airwallex 3DS frictionless iframe"),window.addEventListener("message",(function(e){var t,n,o,i;e.origin===d.gatewayUrl&&e.isTrusted&&"onReady"===(null===(t=e.data)||void 0===t?void 0:t.code)&&"threeDsFrictionless"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(null===(i=null===(o=d.iframe)||void 0===o?void 0:o.contentWindow)||void 0===i||i.postMessage({code:"update",data:d.confirmResponse},d.gatewayUrl))})),d}return n(t,e),t.prototype.confirm=function(){var e,t;return a(this,void 0,void 0,(function(){return r(this,(function(n){return null===(t=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({code:"confirm",data:this.confirmResponse},this.gatewayUrl),[2,null]}))}))},t}(v),A=function(e){function t(t,n,o){var i,a,r,l,d,s,c=e.call(this,t,o)||this;return c.confirmResponse=n,null===(i=c.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/3ds-challenge?options=").concat(encodeURIComponent(JSON.stringify(c.options)))),null===(a=c.iframe)||void 0===a||a.setAttribute("name","Airwallex 3DS challenge iframe"),null===(r=c.iframe)||void 0===r||r.setAttribute("title","Airwallex 3DS challenge iframe"),null===(l=c.iframe)||void 0===l||l.setAttribute("scrolling","yes"),x({challengeWindowSize:null==o?void 0:o.customizeChallengeWindowSize,style:{popupWidth:null===(d=null==o?void 0:o.style)||void 0===d?void 0:d.popupWidth,popupHeight:null===(s=null==o?void 0:o.style)||void 0===s?void 0:s.popupHeight},useDefaultStyle:null==o?void 0:o.useDefaultStyle,iframe:c.iframe}),window.addEventListener("message",(function(e){var t,n,o,i;e.origin===c.gatewayUrl&&e.isTrusted&&"onReady"===(null===(t=e.data)||void 0===t?void 0:t.code)&&"threeDsChallenge"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(null===(i=null===(o=c.iframe)||void 0===o?void 0:o.contentWindow)||void 0===i||i.postMessage({code:"update",data:c.confirmResponse},c.gatewayUrl))})),c}return n(t,e),t.prototype.confirm=function(){var e,t;return a(this,void 0,void 0,(function(){return r(this,(function(n){return null===(t=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===t||t.postMessage({code:"confirm",data:this.confirmResponse},this.gatewayUrl),[2,null]}))}))},t}(v),S="\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 0%;\n  z-index: 1500;\n  overflow: hidden;\n  background: rgba(84, 84, 94, 0.3);\n",U="threeDsFrictionless",P="threeDsChallenge",I=null,R={resolver:null,reject:null,awaiting:!1},x=function(e){var t=e.challengeWindowSize,n=e.style,o=e.useDefaultStyle,i=void 0===o||o,a=e.iframe,r=t&&q[t]?q[t]:q["05"],l=(null==n?void 0:n.popupWidth)?"".concat(null==n?void 0:n.popupWidth,"px"):r[0],d=(null==n?void 0:n.popupHeight)?"".concat(null==n?void 0:n.popupHeight,"px"):r[1];a.setAttribute("style","\n    background: white;\n    width: ".concat(l,";\n    height: ").concat(d,";\n    position: ").concat(i?"absolute":"relative",";\n    top: ").concat(i?"50%":"0",";\n    left: ").concat(i?"50%":"0",";\n    transform: ").concat(i?"translate(-50%, -50%)":"none",";\n    border-radius: ").concat(i?"4px":"0",";\n    "))},_=function(){I&&(I.remove(),I=null)},L=function(e){var t;null===(t=document.querySelector("#".concat(e)))||void 0===t||t.remove(),Ue(e===U?U:P)},j=function(){R.awaiting=!1,R.resolver=null,R.reject=null},k=function(e){var t,n,o="data"in e?e.data:e.detail,i=["hpp","api"].includes(h),a=i?null:Pe(h),r=(null==a?void 0:a.gatewayUrl)||window.location.origin;("data"in e&&e.origin===r&&e.isTrusted||i)&&(null==o?void 0:o.type)===P&&("onReady"===(null==o?void 0:o.code)&&(console.log("challengeHandler onReady",(new Date).toLocaleTimeString()),setTimeout((function(){_(),m.style.height="100%"}),2e3)),"onChallengeSuccess"===(null==o?void 0:o.code)&&(m.style.height="0"),"onSuccess"===(null==o?void 0:o.code)&&(console.log("challengeHandler onSuccess",(new Date).toLocaleTimeString()),null===(t=R.resolver)||void 0===t||t.call(R,o),j(),L(P)),["onError","onChallengeError"].includes(null==o?void 0:o.code)&&(console.log("challengeHandler ".concat(null==o?void 0:o.code),(new Date).toLocaleTimeString()),null===(n=R.reject)||void 0===n||n.call(R,o.error),j(),L(P)))},W=function(e){var t;L(U),f?m=f:((m=document.createElement("div")).setAttribute("id",P),m.setAttribute("style",S),document.body.appendChild(m)),Ie(P,new A(b,e,{origin:window.location.origin,style:{popupWidth:y,popupHeight:w},useDefaultStyle:null===f,customizeChallengeWindowSize:g,intent:E})),window.addEventListener("message",k),null===(t=Pe(P))||void 0===t||t.mount(m)},T=function(e){var t,n,o="data"in e?e.data:e.detail,i=["hpp","api"].includes(h),a=i?null:Pe(h),r=(null==a?void 0:a.gatewayUrl)||window.location.origin;("data"in e&&e.origin===r&&e.isTrusted||i)&&(null==o?void 0:o.type)===U&&(L(P),"onSuccess"===(null==o?void 0:o.code)&&(console.log("frictionlessHandler onSuccess",(new Date).toLocaleTimeString()),_(),null===(t=R.resolver)||void 0===t||t.call(R,o),j(),L(U)),["onError","onChallengeError"].includes(null==o?void 0:o.code)&&(console.log("frictionlessHandler ".concat(null==o?void 0:o.code),(new Date).toLocaleTimeString()),null===(n=R.reject)||void 0===n||n.call(R,o.error),j(),L(U),_()),"onChallenge"===(null==o?void 0:o.code)&&(console.log("frictionlessHandler onChallenge threeDsFrictionlessType",(new Date).toLocaleTimeString()),W(o)))},M=function(e){var t,n=e.intent,o=e.gatewayUrl,i=e.next_action,a=e.authFormContainer,r=e.componentType,l=e.challengeWindowSize;if(console.log("threeDsHandler onChallenge type",(new Date).toLocaleTimeString()),f=document.getElementById(a||""),h=r,g=l,b=o,E=n,L(U),L(P),function(e){var t=e.gatewayUrl,n=e.challengeWindowSize,o=e.style;if(!I){var i=null===f,a=document.createElement("iframe");a.setAttribute("src","".concat(t,"/#/elements/loading")),a.setAttribute("frameborder","0"),x({challengeWindowSize:n,style:o,useDefaultStyle:i,iframe:a}),(I=document.createElement("div")).setAttribute("id","threeDsLoading"),I.setAttribute("style",S),I.style.height="100%",I.appendChild(a),document.body.appendChild(I)}}({gatewayUrl:o,challengeWindowSize:l,style:{popupWidth:y,popupHeight:w}}),"WAITING_USER_INFO_INPUT"===(null==i?void 0:i.stage))W({type:"threeDsFrictionless",next_action:i});else{Ie(U,new C(b,{code:"",type:U,next_action:i},{intent:E,origin:window.location.origin}));var d=document.createElement("div");d.setAttribute("id",U),document.body.appendChild(d),window.addEventListener("message",T),null===(t=Pe(U))||void 0===t||t.mount(d)}return new Promise((function(e,t){R.resolver=e,R.reject=t,R.awaiting=!0}))},O=function(e){var t=e.type,n=e.popupWidth,o=e.popupHeight,i=e.authFormContainer;y=n,w=o;var l=function(e){return a(void 0,void 0,void 0,(function(){var n,o,a,d,s,c,u,v,p,m,f,h;return r(this,(function(r){switch(r.label){case 0:if(n="data"in e?e.data:e.detail,a=(o="hpp"===t)?null:Pe(t),d=(null==a?void 0:a.gatewayUrl)||window.location.origin,!("data"in e&&e.origin===d&&e.isTrusted||o)||(null==n?void 0:n.type)!==t||"onChallenge"!==(null==n?void 0:n.code))return[3,4];s=n.next_action,c=n.intent,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,M({gatewayUrl:d,intent:c,next_action:s,authFormContainer:i,componentType:t})];case 2:return u=r.sent(),"hpp"===t?(y=new CustomEvent("on3dsSuccess",{detail:u,bubbles:!0,composed:!0}),window.document.dispatchEvent(y)):((null==u?void 0:u.intent)&&(null==a||a.success(null==u?void 0:u.intent)),null===(m=null===(p=null==a?void 0:a.iframe)||void 0===p?void 0:p.contentWindow)||void 0===m||m.postMessage({code:"on3dsSuccess",confirmResult:u},d)),window.removeEventListener("message",l),window.removeEventListener("message",T),window.removeEventListener("message",k),[3,4];case 3:return v=r.sent(),"hpp"===t?function(e){var t=new CustomEvent("on3dsError",{detail:{error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(t)}(v):(v&&(null==a||a.fail(v)),null===(h=null===(f=null==a?void 0:a.iframe)||void 0===f?void 0:f.contentWindow)||void 0===h||h.postMessage({code:"on3dsError",error:v},d)),window.removeEventListener("message",k),[3,4];case 4:return[2]}var y}))}))};window.addEventListener("message",l)},F="",D=function(e){var t=e.intent_id,n=void 0===t?"":t,o=e.env;return function(e,t,n){void 0===n&&(n=!0);var o,i,a=t||(-1!==(null==(o=window.location.hostname)?void 0:o.indexOf("dev"))?"dev":-1!==(null==o?void 0:o.indexOf("preview"))?"preview":-1!==(null==o?void 0:o.indexOf("qa"))?"qa":-1!==(null==o?void 0:o.indexOf("staging"))?"staging":-1!==(null==o?void 0:o.indexOf("demo"))?"demo":"checkout.airwallex.com"===o||"api-checkout.airwallex.com"===o?"prod":"dev");switch(a){case"prod":i="";break;case"preview":i="-staging";break;case"qa":i="-dev";break;default:i="-".concat(a)}var r="https://static".concat(i,".airwallex.com/webapp/fraud/device-fingerprint/index.js"),l=document.createElement("script"),d="airwallex-fraud-api";document.getElementById(d)||(l.setAttribute("id",d),l.setAttribute("data-order-session-id",e),n&&l.setAttribute("data-disable-3rd-tracking","true"),l.src=r,document.body.appendChild(l))}(F=n,o,!1),F},q={"01":["250px","400px"],"02":["390px","400px"],"03":["500px","600px"],"04":["600px","400px"],"05":["100%","100%"]},B="applePayButton",N=function(e){function t(t,n){var i,l,d,s,c,u=e.call(this,t,n)||this;return u.session=void 0,p()?(null===(i=u.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/apple-pay?options=").concat(encodeURIComponent(JSON.stringify(o(o({},u.options),{fonts:null===(l=Ae.options)||void 0===l?void 0:l.fonts}))),"&lang=").concat(null===(d=Ae.options)||void 0===d?void 0:d.locale)),null===(s=u.iframe)||void 0===s||s.setAttribute("name","Airwallex apple pay button iframe"),null===(c=u.iframe)||void 0===c||c.setAttribute("title","Airwallex apple pay button iframe")):(console.warn("apple pay not support this device"),setTimeout((function(){u.ready()}),0)),u.addResizeListener(B),u.listenerFunc=function(e){var t,n,o,i,l,d,s,c,v,p;try{if(e.origin===u.gatewayUrl&&e.isTrusted&&(null===(t=e.data)||void 0===t?void 0:t.type)===B)switch(null===(n=e.data)||void 0===n?void 0:n.code){case"onReady":D({intent_id:null===(o=e.data)||void 0===o?void 0:o.deviceId,env:null===(i=null==Ae?void 0:Ae.options)||void 0===i?void 0:i.env}),u.ready();break;case"onApplePayButtonClick":u.session||(u.session=new ApplePaySession(4,e.data.res)),u.click(),u.session.begin(),u.session.onvalidatemerchant=function(e){return a(u,void 0,void 0,(function(){var t,n,o;return r(this,(function(i){return t=e.validationURL,null===(o=null===(n=this.iframe)||void 0===n?void 0:n.contentWindow)||void 0===o||o.postMessage({code:"onApplePaySessionUpdate",name:"onvalidatemerchant",validationURL:t},this.gatewayUrl),[2]}))}))},u.session.onpaymentauthorized=function(e){var t,n;null===(n=null===(t=u.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"onApplePaySessionUpdate",name:"onpaymentauthorized",token:e.payment.token,billingContact:e.payment.billingContact},u.gatewayUrl)},u.session.oncancel=function(e){u.session=void 0,u.cancel(e)};break;case"onApplePayValidateSuccess":null===(l=u.session)||void 0===l||l.completeMerchantValidation(e.data.res);break;case"onSuccess":var m={status:ApplePaySession.STATUS_SUCCESS};null===(d=u.session)||void 0===d||d.completePayment(m),u.success(null===(s=e.data)||void 0===s?void 0:s.intent,null===(c=e.data)||void 0===c?void 0:c.consent);break;case"onError":m={status:ApplePaySession.STATUS_FAILURE},null===(v=u.session)||void 0===v||v.completePayment(m),u.fail(null===(p=e.data)||void 0===p?void 0:p.error)}}catch(e){u.session=void 0,console.error(e)}},window.addEventListener("popstate",(function(){window.removeEventListener("message",u.listenerFunc)})),window.addEventListener("message",u.listenerFunc),u}return n(t,e),t.prototype.ready=function(){var e,t=new CustomEvent("onReady",{detail:{type:B},bubbles:!0,composed:!0});null===(e=this.domElement)||void 0===e||e.dispatchEvent(t)},t.prototype.click=function(){var e,t=new CustomEvent("onClick",{detail:{type:B},bubbles:!0,composed:!0});null===(e=this.domElement)||void 0===e||e.dispatchEvent(t)},t.prototype.cancel=function(e){var t,n=new CustomEvent("onCancel",{detail:{type:B,event:e},bubbles:!0,composed:!0});null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t.prototype.success=function(e,t){var n,o=new CustomEvent("onSuccess",{detail:{type:B,intent:e,consent:t},bubbles:!0,composed:!0});null===(n=this.domElement)||void 0===n||n.dispatchEvent(o)},t.prototype.fail=function(e){var t,n=new CustomEvent("onError",{detail:{type:B,error:e},bubbles:!0,composed:!0});null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t.prototype.destroy=function(){e.prototype.destroy.call(this),window.removeEventListener("message",this.listenerFunc)},t}(v),z="card",H=function(e){var t=e.payment_consent_id,n=e.id,o=e.customer_id,i=e.currency,a=(e.latest_payment_attempt||{}).payment_method||{},r=a.id,l=a.card||{};return{intent_id:n,payment_consent_id:t||"",customer_id:o||"",currency:i||"",payment_method:{id:r||"",bin:l.bin,last4:l.last4,brand:l.brand}}},J=function(e){function t(t,n){var i,a,r,l,d,s=e.call(this,t,n)||this;return s.confirmIntent={resolver:null,reject:null,awaiting:!1},s.paymentConsent={resolver:null,reject:null,awaiting:!1},null===(i=s.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/card?options=").concat(JSON.stringify(o(o({},s.options),{fonts:null===(a=Ae.options)||void 0===a?void 0:a.fonts})),"&lang=").concat(null===(r=Ae.options)||void 0===r?void 0:r.locale)),null===(l=s.iframe)||void 0===l||l.setAttribute("name","Airwallex card element iframe"),null===(d=s.iframe)||void 0===d||d.setAttribute("title","Airwallex card element iframe"),s.addResizeListener(z),window.addEventListener("message",(function(e){var t,o,i,a,r,l,d,c,u,v,p,m,f,h,y,w,g,b,E,C,A,S,U,P,I,R,x,_;if(e.origin===s.gatewayUrl&&e.isTrusted&&(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)===z){if("onSubmit"===(null===(o=e.data)||void 0===o?void 0:o.code)){var L=new CustomEvent(null===(i=e.data)||void 0===i?void 0:i.code,{detail:{type:z},bubbles:!0,composed:!0});window.document.dispatchEvent(L),null===(a=s.domElement)||void 0===a||a.dispatchEvent(L)}"onDynamicCurrencyConversion"===(null===(r=e.data)||void 0===r?void 0:r.code)&&(L=new CustomEvent(null===(l=e.data)||void 0===l?void 0:l.code,{detail:{type:z},bubbles:!0,composed:!0}),window.document.dispatchEvent(L),null===(d=s.domElement)||void 0===d||d.dispatchEvent(L)),"onReady"===(null===(c=e.data)||void 0===c?void 0:c.code)&&(D({intent_id:null===(u=e.data)||void 0===u?void 0:u.deviceId,env:null===(v=null==Ae?void 0:Ae.options)||void 0===v?void 0:v.env}),L=new CustomEvent(null===(p=e.data)||void 0===p?void 0:p.code,{detail:{type:z},bubbles:!0,composed:!0}),null===(m=s.domElement)||void 0===m||m.dispatchEvent(L),O({type:z,popupWidth:null===(f=null==n?void 0:n.style)||void 0===f?void 0:f.popupWidth,popupHeight:null===(h=null==n?void 0:n.style)||void 0===h?void 0:h.popupHeight,authFormContainer:null==n?void 0:n.authFormContainer})),"onSuccess"===(null===(y=e.data)||void 0===y?void 0:y.code)&&s.success(null===(w=e.data)||void 0===w?void 0:w.intent),"onError"===(null===(g=e.data)||void 0===g?void 0:g.code)&&s.fail(null===(b=e.data)||void 0===b?void 0:b.error),["onFocus","onBlur","onChange"].includes(null===(E=e.data)||void 0===E?void 0:E.code)&&(L=new CustomEvent(null===(C=e.data)||void 0===C?void 0:C.code,{detail:{type:z,complete:null!==(S=null===(A=e.data)||void 0===A?void 0:A.complete)&&void 0!==S&&S,empty:null!==(P=null===(U=e.data)||void 0===U?void 0:U.empty)&&void 0!==P&&P,error:null===(I=e.data)||void 0===I?void 0:I.error,brand:null!==(x=null===(R=e.data)||void 0===R?void 0:R.brand)&&void 0!==x?x:""},bubbles:!0,composed:!0}),window.document.dispatchEvent(L),null===(_=s.domElement)||void 0===_||_.dispatchEvent(L))}})),s}return n(t,e),t.prototype.confirm=function(e){var t,n;return a(this,void 0,void 0,(function(){var a,l,d,s,c=this;return r(this,(function(r){return this.confirmIntent.awaiting&&console.warn("Should waiting previous confirm finished before execute new one!"),l=(a=e||{}).id,d=a.intent_id,s=i(a,["id","intent_id","element"]),null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"confirm",data:o(o({},s),{id:l||d})},this.gatewayUrl),[2,new Promise((function(e,t){c.confirmIntent.resolver=e,c.confirmIntent.reject=t,c.confirmIntent.awaiting=!0}))]}))}))},t.prototype.createPaymentConsent=function(e){var t,n;return a(this,void 0,void 0,(function(){var a,l,d=this;return r(this,(function(r){return this.paymentConsent.awaiting&&console.warn("Should waiting previous createPaymentConsent finished before execute new one!"),a=e.intent_id,l=i(e,["element","intent_id"]),null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"createPaymentConsent",data:o(o({},l),{intent_id:a})},this.gatewayUrl),[2,new Promise((function(e,t){d.paymentConsent.resolver=e,d.paymentConsent.reject=t,d.paymentConsent.awaiting=!0}))]}))}))},t.prototype.success=function(e){this.confirmIntent.awaiting&&this.confirmIntent.resolver&&this.confirmIntent.resolver(e),this.paymentConsent.awaiting&&this.paymentConsent.resolver&&this.paymentConsent.resolver(H(e)),this.confirmIntent.awaiting=!1,this.paymentConsent.awaiting=!1},t.prototype.fail=function(e){this.confirmIntent.awaiting&&this.confirmIntent.reject&&this.confirmIntent.reject(e),this.paymentConsent.awaiting&&this.paymentConsent.reject&&this.paymentConsent.reject(e),this.confirmIntent={resolver:null,reject:null,awaiting:!1},this.paymentConsent={resolver:null,reject:null,awaiting:!1}},t}(v),V="cardNumber",K=function(e){function t(t,n){var i,a,r,l,d,s=e.call(this,t,n)||this;return s.retrieve={resolver:null,reject:null,awaiting:!1},s.confirmIntent={resolver:null,reject:null,awaiting:!1},s.createMethod={resolver:null,reject:null,awaiting:!1},s.paymentConsent={resolver:null,reject:null,awaiting:!1},null===(i=s.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/card-number?options=").concat(encodeURIComponent(JSON.stringify(o(o({},s.options),{fonts:null===(a=Ae.options)||void 0===a?void 0:a.fonts}))),"&lang=").concat(null===(r=Ae.options)||void 0===r?void 0:r.locale)),null===(l=s.iframe)||void 0===l||l.setAttribute("name","Airwallex card number element iframe"),null===(d=s.iframe)||void 0===d||d.setAttribute("title","Airwallex card number element iframe"),s.addResizeListener(V),window.addEventListener("message",(function(e){var t,o,i,a,r,l,d,c,u,v,p,m,f,h,y,w,g,b,E,C,A,S,U,P,I,R,x,_,L,j,k,W,T,M,F,q,B,N,z;if(e.origin===s.gatewayUrl&&e.isTrusted&&(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)===V){if("onSubmit"===(null===(o=e.data)||void 0===o?void 0:o.code)){var H=new CustomEvent(null===(i=e.data)||void 0===i?void 0:i.code,{detail:{type:V},bubbles:!0,composed:!0});window.document.dispatchEvent(H),null===(a=s.domElement)||void 0===a||a.dispatchEvent(H)}"onDynamicCurrencyConversion"===(null===(r=e.data)||void 0===r?void 0:r.code)&&(H=new CustomEvent(null===(l=e.data)||void 0===l?void 0:l.code,{detail:{type:V},bubbles:!0,composed:!0}),window.document.dispatchEvent(H),null===(d=s.domElement)||void 0===d||d.dispatchEvent(H)),"onReady"===(null===(c=e.data)||void 0===c?void 0:c.code)&&(D({intent_id:null===(u=e.data)||void 0===u?void 0:u.deviceId,env:null===(v=null==Ae?void 0:Ae.options)||void 0===v?void 0:v.env}),H=new CustomEvent(null===(p=e.data)||void 0===p?void 0:p.code,{detail:{type:null===(m=e.data)||void 0===m?void 0:m.type},bubbles:!0,composed:!0}),null===(f=s.domElement)||void 0===f||f.dispatchEvent(H),O({type:V,popupWidth:null===(h=null==n?void 0:n.style)||void 0===h?void 0:h.popupWidth,popupHeight:null===(y=null==n?void 0:n.style)||void 0===y?void 0:y.popupHeight,authFormContainer:null==n?void 0:n.authFormContainer})),"onSuccess"===(null===(w=e.data)||void 0===w?void 0:w.code)&&(s.confirmIntent.resolver||s.paymentConsent.resolver)&&s.success(null===(g=e.data)||void 0===g?void 0:g.intent),"onError"===(null===(b=e.data)||void 0===b?void 0:b.code)&&(s.confirmIntent.reject||s.paymentConsent.reject)&&s.fail(null===(E=e.data)||void 0===E?void 0:E.error),"onIntentRetrieved"===(null===(C=e.data)||void 0===C?void 0:C.code)&&s.retrieve.resolver&&s.success(null===(A=e.data)||void 0===A?void 0:A.intent),"onRetrieveIntentError"===(null===(S=e.data)||void 0===S?void 0:S.code)&&(s.fail(null===(U=e.data)||void 0===U?void 0:U.error),s.retrieve.awaiting=!1),"onPaymentMethodCreated"===(null===(P=e.data)||void 0===P?void 0:P.code)&&s.createMethod.resolver&&(s.createMethod.resolver(null===(I=e.data)||void 0===I?void 0:I.paymentMethod),s.createMethod.awaiting=!1),"onPaymentMethodCreatedError"===(null===(R=e.data)||void 0===R?void 0:R.code)&&s.fail(null===(x=e.data)||void 0===x?void 0:x.error),"onPressArrowKey"===(null===(_=e.data)||void 0===_?void 0:_.code)&&s.pressArrowKey(V,null===(L=e.data)||void 0===L?void 0:L.arrowKey),["onFocus","onBlur","onChange"].includes(null===(j=e.data)||void 0===j?void 0:j.code)&&(H=new CustomEvent(null===(k=e.data)||void 0===k?void 0:k.code,{detail:{type:V,complete:null!==(T=null===(W=e.data)||void 0===W?void 0:W.complete)&&void 0!==T&&T,empty:null!==(F=null===(M=e.data)||void 0===M?void 0:M.empty)&&void 0!==F&&F,error:null===(q=e.data)||void 0===q?void 0:q.error,brand:null!==(N=null===(B=e.data)||void 0===B?void 0:B.brand)&&void 0!==N?N:""},bubbles:!0,composed:!0}),window.document.dispatchEvent(H),null===(z=s.domElement)||void 0===z||z.dispatchEvent(H))}})),s}return n(t,e),t.prototype.confirm=function(e){var t,n;return a(this,void 0,void 0,(function(){var a,l,d,s,c=this;return r(this,(function(r){return this.confirmIntent.awaiting&&console.warn("Should waiting previous confirm finished before execute new one!"),l=(a=e||{}).id,d=a.intent_id,s=i(a,["id","intent_id","element"]),null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"confirm",data:o(o({},s),{id:l||d})},this.gatewayUrl),[2,new Promise((function(e,t){c.confirmIntent.resolver=e,c.confirmIntent.reject=t,c.confirmIntent.awaiting=!0}))]}))}))},t.prototype.createPaymentMethod=function(e){var t,n;return a(this,void 0,void 0,(function(){var o,a=this;return r(this,(function(r){return this.createMethod.awaiting&&console.warn("Should waiting previous createPaymentMethod finished before execute new one!"),o=i(e||{},["element"]),null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"createPaymentMethod",data:o},this.gatewayUrl),[2,new Promise((function(e,t){a.createMethod.resolver=e,a.createMethod.reject=t,a.createMethod.awaiting=!0}))]}))}))},t.prototype.createPaymentConsent=function(e){var t,n;return a(this,void 0,void 0,(function(){var a,l,d=this;return r(this,(function(r){return this.paymentConsent.awaiting&&console.warn("Should waiting previous createPaymentConsent finished before execute new one!"),a=e.intent_id,l=i(e,["element","intent_id"]),null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"createPaymentConsent",data:o(o({},l),{intent_id:a})},this.gatewayUrl),[2,new Promise((function(e,t){d.paymentConsent.resolver=e,d.paymentConsent.reject=t,d.paymentConsent.awaiting=!0}))]}))}))},t.prototype.getPaymentIntent=function(e,t){var n,o;return a(this,void 0,void 0,(function(){var i=this;return r(this,(function(a){return this.retrieve.awaiting&&console.warn("Should waiting previous getPaymentIntent finished before execute new one!"),null===(o=null===(n=this.iframe)||void 0===n?void 0:n.contentWindow)||void 0===o||o.postMessage({code:"getIntent",data:{id:e,client_secret:t}},this.gatewayUrl),[2,new Promise((function(e,t){i.retrieve.resolver=e,i.retrieve.reject=t,i.retrieve.awaiting=!0}))]}))}))},t.prototype.success=function(e){this.confirmIntent.awaiting&&this.confirmIntent.resolver&&this.confirmIntent.resolver(e),this.retrieve.awaiting&&this.retrieve.resolver&&this.retrieve.resolver(e),this.paymentConsent.awaiting&&this.paymentConsent.resolver&&this.paymentConsent.resolver(H(e)),this.confirmIntent.awaiting=!1,this.retrieve.awaiting=!1,this.paymentConsent.awaiting=!1},t.prototype.fail=function(e){this.confirmIntent.awaiting&&this.confirmIntent.reject&&this.confirmIntent.reject(e),this.retrieve.awaiting&&this.retrieve.reject&&this.retrieve.reject(e),this.createMethod.awaiting&&this.createMethod.reject&&this.createMethod.reject(e),this.paymentConsent.awaiting&&this.paymentConsent.reject&&this.paymentConsent.reject(e),this.retrieve={resolver:null,reject:null,awaiting:!1},this.confirmIntent={resolver:null,reject:null,awaiting:!1},this.createMethod={resolver:null,reject:null,awaiting:!1},this.paymentConsent={resolver:null,reject:null,awaiting:!1}},t}(v),G="expiry",Z=function(e){function t(t,n){var i,a,r,l,d,s=e.call(this,t,n)||this;return null===(i=s.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/expiry?options=").concat(encodeURIComponent(JSON.stringify(o(o({},s.options),{fonts:null===(a=Ae.options)||void 0===a?void 0:a.fonts}))),"&lang=").concat(null===(r=Ae.options)||void 0===r?void 0:r.locale)),null===(l=s.iframe)||void 0===l||l.setAttribute("name","Airwallex expiry number element iframe"),null===(d=s.iframe)||void 0===d||d.setAttribute("title","Airwallex expiry number element iframe"),s.addResizeListener(G),window.addEventListener("message",(function(e){var t,n,o,i,a,r,l,d,c,u,v,p,m,f,h;if(e.origin===s.gatewayUrl&&e.isTrusted&&(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)===G){if("onReady"===(null===(n=e.data)||void 0===n?void 0:n.code)){var y=new CustomEvent(null===(o=e.data)||void 0===o?void 0:o.code,{detail:{type:null===(i=e.data)||void 0===i?void 0:i.type},bubbles:!0,composed:!0});null===(a=s.domElement)||void 0===a||a.dispatchEvent(y)}["onFocus","onBlur","onChange"].includes(null===(r=e.data)||void 0===r?void 0:r.code)&&(y=new CustomEvent(null===(l=e.data)||void 0===l?void 0:l.code,{detail:{type:G,complete:null!==(c=null===(d=e.data)||void 0===d?void 0:d.complete)&&void 0!==c&&c,empty:null!==(v=null===(u=e.data)||void 0===u?void 0:u.empty)&&void 0!==v&&v,error:null===(p=e.data)||void 0===p?void 0:p.error},bubbles:!0,composed:!0}),window.document.dispatchEvent(y),null===(m=s.domElement)||void 0===m||m.dispatchEvent(y)),"onPressArrowKey"===(null===(f=e.data)||void 0===f?void 0:f.code)&&s.pressArrowKey(G,null===(h=e.data)||void 0===h?void 0:h.arrowKey)}})),s}return n(t,e),t}(v),Q="cvc",X=function(e){function t(t,n){var i,a,r,l,d,s=e.call(this,t,n)||this;return s.confirmIntent={resolver:null,reject:null,awaiting:!1},null===(i=s.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/cvc?options=").concat(encodeURIComponent(JSON.stringify(o(o({},s.options),{fonts:null===(a=Ae.options)||void 0===a?void 0:a.fonts}))),"&lang=").concat(null===(r=Ae.options)||void 0===r?void 0:r.locale)),null===(l=s.iframe)||void 0===l||l.setAttribute("name","Airwallex cvc number element iframe"),null===(d=s.iframe)||void 0===d||d.setAttribute("title","Airwallex cvc number element iframe"),s.addResizeListener("cvc"),window.addEventListener("message",(function(e){var t,o,i,a,r,l,d,c,u,v,p,m,f,h,y,w,g,b,E,C,A,S,U,P,I,R,x,_,L,j,k,W,T;if(e.origin===s.gatewayUrl&&e.isTrusted&&(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)===Q){if("onSubmit"===(null===(o=e.data)||void 0===o?void 0:o.code)){var M=new CustomEvent(null===(i=e.data)||void 0===i?void 0:i.code,{detail:{type:Q},bubbles:!0,composed:!0});window.document.dispatchEvent(M),null===(a=s.domElement)||void 0===a||a.dispatchEvent(M)}"onDynamicCurrencyConversion"===(null===(r=e.data)||void 0===r?void 0:r.code)&&(M=new CustomEvent(null===(l=e.data)||void 0===l?void 0:l.code,{detail:{type:Q},bubbles:!0,composed:!0}),window.document.dispatchEvent(M),null===(d=s.domElement)||void 0===d||d.dispatchEvent(M)),"onReady"===(null===(c=e.data)||void 0===c?void 0:c.code)&&(D({intent_id:null===(u=e.data)||void 0===u?void 0:u.deviceId,env:null===(v=null==Ae?void 0:Ae.options)||void 0===v?void 0:v.env}),M=new CustomEvent(null===(p=e.data)||void 0===p?void 0:p.code,{detail:{type:null===(m=e.data)||void 0===m?void 0:m.type},bubbles:!0,composed:!0}),null===(f=s.domElement)||void 0===f||f.dispatchEvent(M),O({type:Q,popupWidth:null===(h=null==n?void 0:n.style)||void 0===h?void 0:h.popupWidth,popupHeight:null===(y=null==n?void 0:n.style)||void 0===y?void 0:y.popupHeight,authFormContainer:null==n?void 0:n.authFormContainer})),"onSuccess"===(null===(w=e.data)||void 0===w?void 0:w.code)&&s.confirmIntent.resolver&&s.success(null===(g=e.data)||void 0===g?void 0:g.intent),"onError"===(null===(b=e.data)||void 0===b?void 0:b.code)&&s.confirmIntent.reject&&s.fail(null===(E=e.data)||void 0===E?void 0:E.error),["onFocus","onBlur","onChange"].includes(null===(C=e.data)||void 0===C?void 0:C.code)&&(M=new CustomEvent(null===(A=e.data)||void 0===A?void 0:A.code,{detail:{type:Q,complete:null!==(U=null===(S=e.data)||void 0===S?void 0:S.complete)&&void 0!==U&&U,empty:null!==(I=null===(P=e.data)||void 0===P?void 0:P.empty)&&void 0!==I&&I,error:null===(R=e.data)||void 0===R?void 0:R.error},bubbles:!0,composed:!0}),window.document.dispatchEvent(M),null===(x=s.domElement)||void 0===x||x.dispatchEvent(M)),"onPressArrowKey"===(null===(_=e.data)||void 0===_?void 0:_.code)&&s.pressArrowKey(Q,null===(L=e.data)||void 0===L?void 0:L.arrowKey)}e.origin===s.gatewayUrl&&e.isTrusted&&"cardNumber"===(null===(j=e.data)||void 0===j?void 0:j.type)&&"onChange"===(null===(k=e.data)||void 0===k?void 0:k.code)&&(null===(T=null===(W=s.iframe)||void 0===W?void 0:W.contentWindow)||void 0===T||T.postMessage({code:"update",options:{cvcLength:e.data.cvcLength}},s.gatewayUrl))})),s}return n(t,e),t.prototype.confirm=function(e){var t,n;return a(this,void 0,void 0,(function(){var a,l,d,s,c=this;return r(this,(function(r){return this.confirmIntent.awaiting&&console.warn("Should waiting previous confirm finished before execute new one!"),l=(a=e||{}).id,d=a.intent_id,s=i(a,["id","intent_id","element"]),null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"confirm",data:o(o({},s),{id:l||d})},this.gatewayUrl),[2,new Promise((function(e,t){c.confirmIntent.resolver=e,c.confirmIntent.reject=t,c.confirmIntent.awaiting=!0}))]}))}))},t.prototype.success=function(e){this.confirmIntent.resolver&&this.confirmIntent.resolver(e),this.confirmIntent.awaiting=!1},t.prototype.fail=function(e){this.confirmIntent.awaiting&&this.confirmIntent.reject&&this.confirmIntent.reject(e),this.confirmIntent={resolver:null,reject:null,awaiting:!1}},t}(v),Y=function(e){function t(t,n){var i,a,r,l,d,s=e.call(this,t,n)||this;return null===(i=s.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/payment-request-button?options=").concat(encodeURIComponent(JSON.stringify(o(o({},n),{fonts:null===(a=Ae.options)||void 0===a?void 0:a.fonts}))),"&lang=").concat(null===(r=Ae.options)||void 0===r?void 0:r.locale)),null===(l=s.iframe)||void 0===l||l.setAttribute("name","Airwallex payment request element iframe"),null===(d=s.iframe)||void 0===d||d.setAttribute("title","Airwallex payment request element iframe"),s.addResizeListener("paymentRequestButton"),window.addEventListener("message",(function(e){var t,o,i,a,r,l,d,c,u,v,p,m,f;if(e.origin===s.gatewayUrl&&e.isTrusted&&"paymentRequestButton"===(null===(t=e.data)||void 0===t?void 0:t.type))if("onReady"===(null===(o=e.data)||void 0===o?void 0:o.code)){D({intent_id:null===(i=e.data)||void 0===i?void 0:i.deviceId,env:null===(a=null==Ae?void 0:Ae.options)||void 0===a?void 0:a.env}),O({type:"paymentRequestButton",popupWidth:null===(r=null==n?void 0:n.style)||void 0===r?void 0:r.popupWidth,popupHeight:null===(l=null==n?void 0:n.style)||void 0===l?void 0:l.popupHeight,authFormContainer:null==n?void 0:n.authFormContainer});var h=new CustomEvent(null===(d=e.data)||void 0===d?void 0:d.code,{detail:{type:null===(c=e.data)||void 0===c?void 0:c.type},bubbles:!0,composed:!0});null===(u=s.domElement)||void 0===u||u.dispatchEvent(h)}else"onSuccess"===(null===(v=e.data)||void 0===v?void 0:v.code)?s.success(null===(p=e.data)||void 0===p?void 0:p.intent):"onError"===(null===(m=e.data)||void 0===m?void 0:m.code)&&s.fail(null===(f=e.data)||void 0===f?void 0:f.error)})),s}return n(t,e),t.prototype.success=function(e){var t=new CustomEvent("onSuccess",{detail:{type:"paymentRequestButton",intent:e},bubbles:!0,composed:!0});window.document.dispatchEvent(t)},t.prototype.fail=function(e){var t=new CustomEvent("onError",{detail:{type:"paymentRequestButton",error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(t)},t}(v),$=function(e){e.startsWith("http")?window.location.href=e:window.open(e)},ee="dropIn",te=function(e){function t(t,n){var i,l,d,s,c,u=e.call(this,t,n)||this,v=(n||{}).applePayRequestOptions;return p()?u.applePayRequestOptions=v:u.applePayRequestOptions=void 0,null===(i=u.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/dropin?options=").concat(encodeURIComponent(JSON.stringify(o(o({},n),{applePayRequestOptions:u.applePayRequestOptions,fonts:null===(l=Ae.options)||void 0===l?void 0:l.fonts}))),"&lang=").concat(null===(d=Ae.options)||void 0===d?void 0:d.locale)),null===(s=u.iframe)||void 0===s||s.setAttribute("name","Airwallex dropIn element iframe"),null===(c=u.iframe)||void 0===c||c.setAttribute("title","Airwallex dropIn element iframe"),u.addResizeListener(ee),u.listenerFunc=function(e){var t,o,i,l,d,s,c,v,p,m,f,h,y,w,g;try{if(e.origin===u.gatewayUrl&&e.isTrusted&&(null===(t=e.data)||void 0===t?void 0:t.type)===ee)switch(null===(o=e.data)||void 0===o?void 0:o.code){case"onReady":D({intent_id:null===(i=e.data)||void 0===i?void 0:i.deviceId,env:null===(l=null==Ae?void 0:Ae.options)||void 0===l?void 0:l.env}),O({type:ee,popupWidth:null===(d=null==n?void 0:n.style)||void 0===d?void 0:d.popupWidth,popupHeight:null===(s=null==n?void 0:n.style)||void 0===s?void 0:s.popupHeight,authFormContainer:null==n?void 0:n.authFormContainer}),u.ready();break;case"onRedirect":var b=(null!==(v=null===(c=e.data)||void 0===c?void 0:c.redirectPayload)&&void 0!==v?v:{}).redirectUrl;b&&$(b);break;case"onSuccess":if(u.success(null===(p=e.data)||void 0===p?void 0:p.intent,null===(m=e.data)||void 0===m?void 0:m.consent),u.session){var E={status:ApplePaySession.STATUS_SUCCESS};null===(f=u.session)||void 0===f||f.completePayment(E)}break;case"onError":u.session&&(E={status:ApplePaySession.STATUS_FAILURE},null===(h=u.session)||void 0===h||h.completePayment(E)),u.fail(null===(y=e.data)||void 0===y?void 0:y.error);break;case"onPendingVerifyAccount":u.pendingVerifyAccount(e.data.intent,null===(w=e.data.directDebit)||void 0===w?void 0:w.url);break;case"onApplePayButtonClick":u.session||(u.session=new ApplePaySession(4,e.data.res)),u.session.begin(),u.session.onvalidatemerchant=function(e){return a(u,void 0,void 0,(function(){var t,n,o;return r(this,(function(i){return t=e.validationURL,null===(o=null===(n=this.iframe)||void 0===n?void 0:n.contentWindow)||void 0===o||o.postMessage({code:"onApplePaySessionUpdate",name:"onvalidatemerchant",validationURL:t},this.gatewayUrl),[2]}))}))},u.session.onpaymentauthorized=function(e){var t,n;null===(n=null===(t=u.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"onApplePaySessionUpdate",name:"onpaymentauthorized",token:e.payment.token,billingContact:e.payment.billingContact},u.gatewayUrl)},u.session.oncancel=function(e){u.session=void 0,u.cancel(e)};break;case"onApplePayValidateSuccess":null===(g=u.session)||void 0===g||g.completeMerchantValidation(e.data.res)}}catch(e){u.session=void 0,console.error(e)}},window.addEventListener("popstate",(function(){window.removeEventListener("message",u.listenerFunc)})),window.addEventListener("message",u.listenerFunc),u}return n(t,e),t.prototype.ready=function(){var e,t=new CustomEvent("onReady",{detail:{type:ee},bubbles:!0,composed:!0});window.document.dispatchEvent(t),null===(e=this.domElement)||void 0===e||e.dispatchEvent(t)},t.prototype.success=function(e,t){var n,o=new CustomEvent("onSuccess",{detail:{type:ee,intent:e,consent:t},bubbles:!0,composed:!0});window.document.dispatchEvent(o),null===(n=this.domElement)||void 0===n||n.dispatchEvent(o)},t.prototype.fail=function(e){var t,n=new CustomEvent("onError",{detail:{type:ee,error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t.prototype.cancel=function(e){var t,n=new CustomEvent("onCancel",{detail:{type:ee,event:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t.prototype.pendingVerifyAccount=function(e,t){var n,o=new CustomEvent("onPendingVerifyAccount",{detail:{type:ee,intent:e,url:t},bubbles:!0,composed:!0});null===(n=this.domElement)||void 0===n||n.dispatchEvent(o),window.document.dispatchEvent(o)},t.prototype.destroy=function(){e.prototype.destroy.call(this),window.removeEventListener("message",this.listenerFunc)},t}(v),ne="fullFeaturedCard",oe=function(e){function t(t,n){var i,a,r,l,d,s=e.call(this,t,n)||this;return null===(i=s.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/full-featured-card?options=").concat(encodeURIComponent(JSON.stringify(o(o({},n),{fonts:null===(a=Ae.options)||void 0===a?void 0:a.fonts}))),"&lang=").concat(null===(r=Ae.options)||void 0===r?void 0:r.locale)),null===(l=s.iframe)||void 0===l||l.setAttribute("name","Airwallex full featured card element iframe"),null===(d=s.iframe)||void 0===d||d.setAttribute("title","Airwallex full featured card element iframe"),s.addResizeListener(ne),window.addEventListener("message",(function(e){var t,o,i,a,r,l,d,c,u,v,p,m,f;if(e.origin===s.gatewayUrl&&e.isTrusted&&(null===(t=e.data)||void 0===t?void 0:t.type)===ne)if("onReady"===(null===(o=e.data)||void 0===o?void 0:o.code)){D({intent_id:null===(i=e.data)||void 0===i?void 0:i.deviceId,env:null===(a=null==Ae?void 0:Ae.options)||void 0===a?void 0:a.env}),O({type:ne,popupWidth:null===(r=null==n?void 0:n.style)||void 0===r?void 0:r.popupWidth,popupHeight:null===(l=null==n?void 0:n.style)||void 0===l?void 0:l.popupHeight,authFormContainer:null==n?void 0:n.authFormContainer});var h=new CustomEvent(null===(d=e.data)||void 0===d?void 0:d.code,{detail:{type:null===(c=e.data)||void 0===c?void 0:c.type},bubbles:!0,composed:!0});null===(u=s.domElement)||void 0===u||u.dispatchEvent(h)}else"onSuccess"===(null===(v=e.data)||void 0===v?void 0:v.code)?s.success(null===(p=e.data)||void 0===p?void 0:p.intent):"onError"===(null===(m=e.data)||void 0===m?void 0:m.code)&&s.fail(null===(f=e.data)||void 0===f?void 0:f.error)})),s}return n(t,e),t.prototype.update=function(e){var t,n;this.options=o(o({},this.options),e),null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"update",options:o({},e)},this.gatewayUrl)},t.prototype.success=function(e){var t,n=new CustomEvent("onSuccess",{detail:{type:ne,intent:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t.prototype.fail=function(e){var t,n=new CustomEvent("onError",{detail:{type:ne,error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t}(v),ie="wechat",ae=function(e){function t(t,n){var i,a,r,l,d,s=e.call(this,t,n)||this;return null===(i=s.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/wechat?options=").concat(encodeURIComponent(JSON.stringify(o(o({},s.options),{fonts:null===(a=Ae.options)||void 0===a?void 0:a.fonts}))),"&lang=").concat(null===(r=Ae.options)||void 0===r?void 0:r.locale)),null===(l=s.iframe)||void 0===l||l.setAttribute("name","Airwallex wechat element iframe"),null===(d=s.iframe)||void 0===d||d.setAttribute("title","Airwallex wechat element iframe"),s.addResizeListener(ie),window.addEventListener("message",(function(e){var t,n,o,i,a,r,l;if(e.origin===s.gatewayUrl&&e.isTrusted&&(null===(t=e.data)||void 0===t?void 0:t.type)===ie)if("onRedirect"===(null===(n=e.data)||void 0===n?void 0:n.code)){var d=(null!==(i=null===(o=e.data)||void 0===o?void 0:o.redirectPayload)&&void 0!==i?i:{}).redirectUrl;d&&(window.location.href=d)}else"onSuccess"===(null===(a=e.data)||void 0===a?void 0:a.code)?s.success(null===(r=e.data)||void 0===r?void 0:r.intent):"onError"===(null===(l=e.data)||void 0===l?void 0:l.code)&&s.fail(e.data.error)})),s}return n(t,e),t.prototype.success=function(e){var t,n=new CustomEvent("onSuccess",{detail:{type:ie,intent:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t.prototype.fail=function(e){var t,n=new CustomEvent("onError",{detail:{type:ie,error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t}(v),re="qrcode",le=function(e){function t(t,n){var i,a,r,l,d,s=e.call(this,t,n)||this;return null===(i=s.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/qrcode?options=").concat(encodeURIComponent(JSON.stringify(o(o({},s.options),{fonts:null===(a=Ae.options)||void 0===a?void 0:a.fonts}))),"&lang=").concat(null===(r=Ae.options)||void 0===r?void 0:r.locale)),null===(l=s.iframe)||void 0===l||l.setAttribute("name","Airwallex qrcode element iframe"),null===(d=s.iframe)||void 0===d||d.setAttribute("title","Airwallex qrcode element iframe"),s.addResizeListener(re),window.addEventListener("message",(function(e){var t,n,o,i,a,r,l;if(e.origin===s.gatewayUrl&&e.isTrusted&&(null===(t=e.data)||void 0===t?void 0:t.type)===re)if("onSuccess"===(null===(n=e.data)||void 0===n?void 0:n.code))s.success(null===(o=e.data)||void 0===o?void 0:o.intent);else if("onError"===(null===(i=e.data)||void 0===i?void 0:i.code))s.fail(e.data.error);else if("onRedirect"===(null===(a=e.data)||void 0===a?void 0:a.code)){var d=(null!==(l=null===(r=e.data)||void 0===r?void 0:r.redirectPayload)&&void 0!==l?l:{}).redirectUrl;d&&(window.location.href=d)}})),s}return n(t,e),t.prototype.success=function(e){var t,n=new CustomEvent("onSuccess",{detail:{type:re,intent:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t.prototype.fail=function(e){var t,n=new CustomEvent("onError",{detail:{type:re,error:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t}(v),de=function(e){function t(t,n){var i,a,r,l,d,s=e.call(this,t,n)||this;return null===(i=s.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/redirect?options=").concat(encodeURIComponent(JSON.stringify(o(o({},s.options),{fonts:null===(a=Ae.options)||void 0===a?void 0:a.fonts}))),"&lang=").concat(null===(r=Ae.options)||void 0===r?void 0:r.locale)),null===(l=s.iframe)||void 0===l||l.setAttribute("name","Airwallex redirect element iframe"),null===(d=s.iframe)||void 0===d||d.setAttribute("title","Airwallex redirect element iframe"),s.addResizeListener("redirect"),window.addEventListener("message",(function(e){var t,o,i,a,r;if(e.origin===s.gatewayUrl&&e.isTrusted&&"redirect"===(null===(t=e.data)||void 0===t?void 0:t.type))if("onRedirect"===(null===(o=e.data)||void 0===o?void 0:o.code)){var l=null!==(a=null===(i=e.data)||void 0===i?void 0:i.redirectPayload)&&void 0!==a?a:{},d=l.redirectUrl,c=l.method,u=l.formData;c===(null==n?void 0:n.method)&&(u?function(e,t){var n=document.createElement("form");n.setAttribute("method","post"),n.setAttribute("style","height: 0; overflow: hidden;"),n.action=t,Object.keys(e||{}).forEach((function(t){var o=document.createElement("input");o.type="hidden",o.name=t,o.value=e[t],n.appendChild(o)}));var o=document.createElement("input");o.type="submit",n.appendChild(o),document.body.appendChild(n),o.click()}(u,d):$(d))}else"onError"===(null===(r=e.data)||void 0===r?void 0:r.code)&&s.fail(e.data.error)})),s}return n(t,e),t.prototype.fail=function(e){var t,n=new CustomEvent("onError",{detail:{type:"redirect",error:e},bubbles:!0,composed:!0});null===(t=this.domElement)||void 0===t||t.dispatchEvent(n),window.document.dispatchEvent(n)},t}(v),se="Airwallex direct debit element iframe",ce="directDebit",ue=function(e){function t(t,n){var i,a,r,l,d,s=e.call(this,t,n)||this;return s.confirmIntent={resolver:null,reject:null,awaiting:!1},s.paymentConsent={resolver:null,reject:null,awaiting:!1},null===(i=s.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/direct-debit?options=").concat(encodeURIComponent(JSON.stringify(o(o({},s.options),{fonts:null===(a=Ae.options)||void 0===a?void 0:a.fonts}))),"&lang=").concat(null===(r=Ae.options)||void 0===r?void 0:r.locale)),null===(l=s.iframe)||void 0===l||l.setAttribute("name",se),null===(d=s.iframe)||void 0===d||d.setAttribute("title",se),s.addResizeListener(ce),window.addEventListener("message",(function(e){var t,n;if(e.origin===s.gatewayUrl&&e.isTrusted&&(null===(t=e.data)||void 0===t?void 0:t.type)===ce)switch(e.data.code){case"onSuccess":s.success(e.data.intent,e.data.consent);break;case"onPendingVerifyAccount":s.pendingVerifyAccount(e.data.intent,null===(n=e.data.directDebit)||void 0===n?void 0:n.url);break;case"onError":s.fail(e.data.error);break;case"onChange":s.change(e.data.complete)}})),s}return n(t,e),t.prototype.change=function(e){var t,n=new CustomEvent("onChange",{detail:{type:ce,complete:e},bubbles:!0,composed:!0});window.document.dispatchEvent(n),null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t.prototype.confirm=function(e){var t,n;return a(this,void 0,void 0,(function(){var o,a=this;return r(this,(function(r){return this.confirmIntent.awaiting?(console.warn("Should waiting previous confirm finished before execute new one!"),[2,null]):(o=i(null!=e?e:{},["element"]),null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"confirm",data:o},this.gatewayUrl),[2,new Promise((function(e,t){a.confirmIntent.resolver=e,a.confirmIntent.reject=t,a.confirmIntent.awaiting=!0}))])}))}))},t.prototype.createPaymentConsent=function(e){var t,n;return a(this,void 0,void 0,(function(){var o,a=this;return r(this,(function(r){return this.paymentConsent.awaiting?(console.warn("Should waiting previous createPaymentConsent finished before execute new one!"),[2,null]):(o=i(e,["element"]),null===(n=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===n||n.postMessage({code:"createPaymentConsent",data:o},this.gatewayUrl),[2,new Promise((function(e,t){a.paymentConsent.resolver=e,a.paymentConsent.reject=t,a.paymentConsent.awaiting=!0}))])}))}))},t.prototype.success=function(e,t){this.confirmIntent.awaiting&&this.confirmIntent.resolver&&e&&this.confirmIntent.resolver(e),this.paymentConsent.awaiting&&this.paymentConsent.resolver&&(e||t)&&(e?this.paymentConsent.resolver(function(e){var t=e.payment_consent_id,n=e.id,o=e.customer_id,i=e.currency;return{intent_id:n,payment_consent_id:null!=t?t:"",customer_id:null!=o?o:"",currency:null!=i?i:""}}(e)):t&&this.paymentConsent.resolver({payment_consent_id:t.id,customer_id:t.customer_id})),this.confirmIntent.awaiting=!1,this.paymentConsent.awaiting=!1},t.prototype.fail=function(e){this.confirmIntent.awaiting&&this.confirmIntent.reject&&this.confirmIntent.reject(e),this.paymentConsent.awaiting&&this.paymentConsent.reject&&this.paymentConsent.reject(e),this.confirmIntent.awaiting=!1,this.paymentConsent.awaiting=!1},t.prototype.pendingVerifyAccount=function(e,t){var n,o=new CustomEvent("onPendingVerifyAccount",{detail:{type:ce,intent:e,url:t},bubbles:!0,composed:!0});null===(n=this.domElement)||void 0===n||n.dispatchEvent(o)},t}(v),ve=function(e){return e.startsWith("http://")||e.startsWith("https://")?encodeURIComponent(e):encodeURIComponent("https://".concat(e))},pe=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/,me=function(e){return"string"==typeof e},fe=function(e){return"boolean"==typeof e},he=function(e){return"string"==typeof e&&pe.test(e)},ye=function(e){return"object"==typeof e&&null!==e},we={intent_id:{validate:me,format:function(e){return"".concat(e)}},client_secret:{validate:me,format:function(e){return"".concat(e)}},theme:{validate:ye,format:function(e){return JSON.stringify(e)}},customer_id:{validate:me,format:function(e){return"".concat(e)}},components:{validate:ye,format:function(e){return JSON.stringify(e)}},autoCapture:{validate:fe,format:function(e){return"".concat(e)}},successUrl:{validate:he,format:function(e){return ve("".concat(e))}},failUrl:{validate:he,format:function(e){return ve("".concat(e))}},cancelUrl:{validate:he,format:function(e){return ve("".concat(e))}},logoUrl:{validate:he,format:function(e){return ve("".concat(e))}},locale:{validate:me,format:function(e){return"".concat(e)}},withBilling:{validate:fe,format:function(e){return"".concat(e)}},mode:{validate:me,format:function(e){return"".concat(e)}},applePayRequestOptions:{validate:ye,format:function(e){return encodeURIComponent(JSON.stringify(e))}},googlePayRequestOptions:{validate:ye,format:function(e){return encodeURIComponent(JSON.stringify(e))}},recurringOptions:{validate:ye,format:function(e){return encodeURIComponent(JSON.stringify(e))}},currency:{validate:me,format:function(e){return"".concat(e)}},country_code:{validate:me,format:function(e){return"".concat(e)}},shopper_name:{validate:me,format:function(e){return"".concat(e)}},shopper_phone:{validate:me,format:function(e){return"".concat(e)}},shopper_email:{validate:me,format:function(e){return"".concat(e)}},showTermLink:{validate:fe,format:function(e){return"".concat(e)}}},ge="googlePayButton",be=function(e){function t(t,n){var i,a,r,l,d,s=e.call(this,t,n)||this,c=s.options,u=c.amount,v=c.client_secret,p=c.countryCode;u&&v&&p?(null===(i=s.iframe)||void 0===i||i.setAttribute("src","".concat(t,"/#/elements/google-pay?options=").concat(encodeURIComponent(JSON.stringify(o(o({},s.options),{fonts:null===(a=Ae.options)||void 0===a?void 0:a.fonts}))),"&lang=").concat(null===(r=Ae.options)||void 0===r?void 0:r.locale)),null===(l=s.iframe)||void 0===l||l.setAttribute("name","Airwallex google pay button iframe"),null===(d=s.iframe)||void 0===d||d.setAttribute("title","Airwallex google pay button iframe")):(console.warn("please check the required options of google pay button element"),s.ready()),s.addResizeListener(ge);var m=function(e){var t,o,i,a,r,l,d,c,u,v;try{if(e.origin===s.gatewayUrl&&e.isTrusted&&(null===(t=e.data)||void 0===t?void 0:t.type)===ge)switch(null===(o=e.data)||void 0===o?void 0:o.code){case"onReady":D({intent_id:null===(i=e.data)||void 0===i?void 0:i.deviceId,env:null===(a=null==Ae?void 0:Ae.options)||void 0===a?void 0:a.env}),O({type:ge,popupWidth:null===(r=null==n?void 0:n.style)||void 0===r?void 0:r.popupWidth,popupHeight:null===(l=null==n?void 0:n.style)||void 0===l?void 0:l.popupHeight,authFormContainer:null==n?void 0:n.authFormContainer}),s.ready();break;case"onSuccess":s.success(null===(d=e.data)||void 0===d?void 0:d.intent,null===(c=e.data)||void 0===c?void 0:c.consent);break;case"onGooglePayButtonClick":s.click();break;case"onCancel":s.cancel(null===(u=e.data)||void 0===u?void 0:u.intent);break;case"onError":s.fail(null===(v=e.data)||void 0===v?void 0:v.error)}}catch(e){console.error(e)}};return window.addEventListener("popstate",(function(){window.removeEventListener("message",m)})),window.addEventListener("message",m),s}return n(t,e),t.prototype.click=function(){var e,t=new CustomEvent("onClick",{detail:{type:ge},bubbles:!0,composed:!0});null===(e=this.domElement)||void 0===e||e.dispatchEvent(t)},t.prototype.ready=function(){var e,t=new CustomEvent("onReady",{detail:{type:ge},bubbles:!0,composed:!0});null===(e=this.domElement)||void 0===e||e.dispatchEvent(t)},t.prototype.cancel=function(e){var t,n=new CustomEvent("onCancel",{detail:{type:ge,intent:e},bubbles:!0,composed:!0});null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t.prototype.success=function(e,t){var n,o=new CustomEvent("onSuccess",{detail:{type:ge,intent:e,consent:t},bubbles:!0,composed:!0});null===(n=this.domElement)||void 0===n||n.dispatchEvent(o)},t.prototype.fail=function(e){var t,n=new CustomEvent("onError",{detail:{type:ge,error:e},bubbles:!0,composed:!0});null===(t=this.domElement)||void 0===t||t.dispatchEvent(n)},t}(v),Ee=["cardNumber","expiry","cvc","paymentRequestButton","card","wechat","qrcode","redirect","dropIn","fullFeaturedCard","applePayButton","googlePayButton","directDebit"],Ce=l(l([],Ee,!0),["threeDsFrictionless","threeDsChallenge"],!0),Ae={gatewayUrl:"",options:{}},Se={cardNumber:null,expiry:null,cvc:null,threeDsFrictionless:null,threeDsChallenge:null,paymentRequestButton:null,card:null,wechat:null,qrcode:null,redirect:null,dropIn:null,fullFeaturedCard:null,applePayButton:null},Ue=function(e){var t;return Ce.includes(e)?(null===(t=Se[e])||void 0===t||t.destroy(),Se[e]=null,!0):(console.warn("destroyElement with type: ".concat(e," not support!")),!1)},Pe=function(e){return Ce.includes(e)?Se[e]:(console.warn("getElement with type: ".concat(e," not support!")),null)},Ie=function(e,t){return Ce.includes(e)?(Se[e]=t,!0):(console.warn("destroyElement with type: ".concat(e," not support!")),!1)};return e.confirmPaymentIntent=function(e){return a(void 0,void 0,void 0,(function(){return r(this,(function(t){return console.info("Confirm intent ".concat((null==e?void 0:e.intent_id)||(null==e?void 0:e.id)," with client secret: ").concat(null==e?void 0:e.client_secret)),(null==e?void 0:e.element)?[2,(null==e?void 0:e.element).confirm(e)]:(console.warn("Card number element must be provided for card payment confirm!"),[2,!1])}))}))},e.confirmPaymentIntentWithSavedCard=function(e){return a(void 0,void 0,void 0,(function(){return r(this,(function(t){return console.info("Confirm intent ".concat((null==e?void 0:e.intent_id)||(null==e?void 0:e.id)," with client secret: ").concat(null==e?void 0:e.client_secret)),(null==e?void 0:e.element)&&(null==e?void 0:e.methodId)?[2,(null==e?void 0:e.element).confirm(e)]:(console.warn("Payment method id must be provided for cvc payment confirm!"),[2,!1])}))}))},e.createElement=function(e,t){var n,o=null!=t?t:{origin:""};return o.origin=o.origin||(null===(n=Ae.options)||void 0===n?void 0:n.origin),Ee.includes(e)?"cardNumber"===e?(Se[e]=new K(Ae.gatewayUrl,o),Se[e]):"card"===e?(Se[e]=new J(Ae.gatewayUrl,o),Se[e]):"fullFeaturedCard"===e?(Se[e]=new oe(Ae.gatewayUrl,o),Se[e]):"wechat"===e?(Se[e]=new ae(Ae.gatewayUrl,o),Se[e]):"qrcode"===e?(Se[e]=new le(Ae.gatewayUrl,o),Se[e]):"redirect"===e?(Se[e]=new de(Ae.gatewayUrl,o),Se[e]):"applePayButton"===e?(Se[e]=new N(Ae.gatewayUrl,o),Se[e]):"googlePayButton"===e?(Se[e]=new be(Ae.gatewayUrl,o),Se[e]):"paymentRequestButton"===e?(Se[e]=new Y(Ae.gatewayUrl,o),Se[e]):"dropIn"===e?(Se[e]=new te(Ae.gatewayUrl,o),Se[e]):"expiry"===e||"cvc"===e?(Se[e]="expiry"===e?new Z(Ae.gatewayUrl,o):new X(Ae.gatewayUrl,o),window.addEventListener("message",(function(t){var n,o,i,a,r,l;t.origin===Ae.gatewayUrl&&t.isTrusted&&e===(null===(n=t.data)||void 0===n?void 0:n.type)&&"onChange"===(null===(o=t.data)||void 0===o?void 0:o.code)&&(null===(r=null===(a=null===(i=Se.cardNumber)||void 0===i?void 0:i.iframe)||void 0===a?void 0:a.contentWindow)||void 0===r||r.postMessage({code:"update_".concat(null===(l=t.data)||void 0===l?void 0:l.type),data:t.data},Ae.gatewayUrl))})),Se[e]):"directDebit"===e?(Se[e]=new ue(Ae.gatewayUrl,o),Se[e]):null:(console.warn("createElement with type: ".concat(e," not support!")),null)},e.createPaymentConsent=function(e){return a(void 0,void 0,void 0,(function(){return r(this,(function(t){return console.info("Create payment consent with client secret: ".concat(e.client_secret)),(null==e?void 0:e.element)?[2,(null==e?void 0:e.element).createPaymentConsent(e)]:(console.warn("Either payment method id or element must be provided for create payment consent!"),[2,!1])}))}))},e.createPaymentMethod=function(e,t){return a(void 0,void 0,void 0,(function(){return r(this,(function(n){return console.info("Create payment method with client secret: ".concat(e)),(null==t?void 0:t.element)?[2,(null==t?void 0:t.element).createPaymentMethod(o(o({},t),{client_secret:e}))]:(console.warn("Either payment method id or element must be provided for payment method create!"),[2,!1])}))}))},e.destroyElement=Ue,e.get3dsReturnUrl=function(e){var t=e.env,n=e.checkoutOrigin;return"".concat(c[t||"prod"],"/api/v1/checkout/elements/3ds?origin=https://").concat(s[t||"prod"],"&checkoutOrigin=").concat(n||window.location.origin,"&componentName=api")},e.getBrowserInfo=function(e){var t,n=window||{},o=n.navigator,i=n.screen,a=(o||{}).language,r=i||{},l=r.colorDepth,d=r.height,s=r.width,c=e||{},u=c.intent_id,v=c.env;return e&&(t=D({intent_id:u,env:v})),{device_id:t,screen_height:d,screen_width:s,screen_color_depth:l,language:a,timezone:(new Date).getTimezoneOffset(),browser:{java_enabled:window.navigator.javaEnabled(),javascript_enabled:!0,user_agent:o.userAgent}}},e.getDeviceFingerprint=D,e.getElement=Pe,e.getPaymentIntent=function(e,t){return a(void 0,void 0,void 0,(function(){var n;return r(this,(function(o){return[2,(null===(n=Se.cardNumber)||void 0===n?void 0:n.getPaymentIntent(e,t))||!1]}))}))},e.handle3ds=function(e){var t=e.next_action,n=e.authFormContainer,o=e.intent,i=e.challengeWindowSize,a=e.env;return M({gatewayUrl:"https://".concat(s[a]),intent:o,next_action:t,authFormContainer:n,componentType:"api",challengeWindowSize:i})},e.handle3dsFlow=O,e.init=function(e){!(null==e?void 0:e.env)&&Ae.gatewayUrl||(Ae.gatewayUrl=u((null==e?void 0:e.env)||"prod")),Ae.options=e},e.redirectToCheckout=function(e){var t=e.env,n=function(e){var t={};return Object.keys(we).forEach((function(n){var o=e[n];null!==o&&""!==o&&we[n].validate(o)&&(t[n]=we[n].format(o))})),t}(i(e,["env"])),o=n||{},a=o.id,r=i(o,["id"]),l=Object.keys(r),d=[];l.forEach((function(e){d.push("".concat(e,"=").concat(r[e]))})),d.push("from=".concat(window.location.origin));var s="recurring"===e.mode?"".concat(u(t||"prod"),"/#/standalone/recurring?").concat(d.join("&")):"".concat(u(t||"prod"),"/#/standalone/checkout/").concat(a||(null==r?void 0:r.intent_id),"?").concat(d.join("&"));window.location.href=s},Object.defineProperty(e,"__esModule",{value:!0}),e}({});